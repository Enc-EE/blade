!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(){function e(){var e=this;this.animations=[],this.updates=[],this.isRunning=!1,this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)},this.addView=function(t){e.addAnimatable(t),t.width=e.width,t.height=e.height},this.removeView=function(t){e.removeAnimatable(t)},this.fps=40,this.fpsInterval=1e3/this.fps,this.animate=function(){e.isRunning&&requestAnimationFrame(e.animate);var t=Date.now(),n=t-e.lastFrameTime;if(n>e.fpsInterval){e.lastFrameTime=t;for(var i=n/1e3,o=0,a=e.updates;o<a.length;o++){(0,a[o])(i)}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var r=0,s=e.animations;r<s.length;r++){(0,s[r])(e.ctx,e.canvas.width,e.canvas.height)}}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),e.createInBody=function(){document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var t=document.createElement("canvas");document.body.appendChild(t),t.style.width="100%",t.style.height="100%";var n=new e;return n.canvas=t,n.ctx=t.getContext("2d"),document.addEventListener("keyup",function(e){80==e.keyCode&&n.playPause(),console.log(e.keyCode)}),n.startAnimation(),n.resize(),n},e.prototype.resize=function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight},e.prototype.startAnimation=function(){this.isRunning=!0,this.lastFrameTime=Date.now(),this.animate()},e.prototype.stopAnimation=function(){this.isRunning=!1},e.prototype.playPause=function(){this.isRunning?this.stopAnimation():this.startAnimation()},e}(),o=function(){return function(){var e=this;this.animations=[],this.updates=[],this.isVisible=!0,this.update=function(t){if(e.isVisible)for(var n=0,i=e.updates;n<i.length;n++)(0,i[n])(t)},this.draw=function(t,n,i){if(e.isVisible)for(var o=0,a=e.animations;o<a.length;o++)(0,a[o])(t,n,i)},this.show=function(){e.isVisible=!0},this.hide=function(){e.isVisible=!1},this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)}}}(),a=function(){function e(e,t,n,i,o){var a=this;this.controller=e,this.onShow=t,this.onAdd=n,this.onRemove=i,this.start=o,this.isShown=!1,this.isAdded=!1,this.addTimerSeconds=1.5,this.removeTimerSeconds=2.5,this.rememberedX=0,this.rememberedY=0,this.location=0,this.update=function(e){a.isShown?a.isAdded?(a.angle=a.angle+Math.PI/9,a.angle=a.angle%(2*Math.PI),a.x=a.rememberedX+25*a.controller.xAxes,a.y=a.rememberedY+25*a.controller.yAxes,a.controller.yAxes>.3?(a.addTimer+=a.controller.yAxes*e,a.addTimer>=a.removeTimerSeconds&&(a.addTimer=0,a.isShown=!1,a.isAdded=!1,a.onRemove(a))):a.controller.yAxes<.1&&(a.addTimer=0),a.controller.start&&(console.log("start"),a.start())):a.controller.yAxes<-.3?(a.addTimer-=a.controller.yAxes*e,a.addTimer>=a.addTimerSeconds&&(a.onAdd(a),a.isAdded=!0,a.addTimer=0)):a.controller.yAxes>-.1&&(a.addTimer=0,a.isShown=!1,a.onRemove(a)):a.controller.yAxes<-.3&&(a.onShow(a),a.isShown=!0,a.addTimer-=a.controller.yAxes*e)},this.draw=function(e,t,n){if(a.location>0){console.log(a.location);var i="black",o=0,r=0;switch(a.location){case 1:i="red",o=t/3,r=(n-100)/3+100;break;case 2:i="green",o=t/3*2,r=(n-100)/3+100;break;case 3:i="blue",o=t/3,r=(n-100)/3*2+100;break;case 4:i="orange",o=t/3*2,r=(n-100)/3*2+100}a.color=i,a.x=o,a.y=r,a.rememberedX=o,a.rememberedY=r,a.location=0}e.fillStyle=a.color,e.save(),e.translate(a.x,a.y),a.isAdded&&(e.save(),e.rotate(a.angle),e.fillRect(-25,-25,50,50),e.restore()),a.isShown&&!a.isAdded&&e.fillRect(-25,35,50/a.addTimerSeconds*a.addTimer,10),a.isShown&&a.isAdded&&a.addTimer>0&&e.fillRect(-25,35,50-50/a.removeTimerSeconds*a.addTimer,10),e.restore()},this.color="black",this.x=0,this.y=0,this.angle=0,this.addTimer=0}return Object.defineProperty(e.prototype,"controllerName",{get:function(){return this.controller.name},enumerable:!0,configurable:!0}),e}(),r=function(){return function(e,t,n,i,o){var a=this;this.name=e,this.xAxes=0,this.yAxes=0,this.start=!1,document.addEventListener("keydown",function(e){e.keyCode==t&&(a.xAxes=-1),e.keyCode==n&&(a.yAxes=-1),e.keyCode==i&&(a.xAxes=1),e.keyCode==o&&(a.yAxes=1),13==e.keyCode&&(a.start=!0)}),document.addEventListener("keyup",function(e){e.keyCode==t&&(a.xAxes=-1)&&(a.xAxes=0),e.keyCode==n&&(a.yAxes=-1)&&(a.yAxes=0),e.keyCode==i&&(a.xAxes=1)&&(a.xAxes=0),e.keyCode==o&&(a.yAxes=1)&&(a.yAxes=0),13==e.keyCode&&(a.start=!1)})}}(),s=function(){function e(e,t){this.name=e,this.index=t}return Object.defineProperty(e.prototype,"xAxes",{get:function(){return navigator.getGamepads()[this.index].axes[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxes",{get:function(){return navigator.getGamepads()[this.index].axes[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return navigator.getGamepads()[this.index].buttons[9].pressed},enumerable:!0,configurable:!0}),e}(),d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=function(e){function t(t){var n=e.call(this)||this;n.start=t,n.menuBlades=[],n.controllers=[],n.gamepads={},n.showMenuBlade=function(e){console.log(e.controllerName),n.menuBlades.length<=4?(n.menuBlades.push(e),e.location=n.menuBlades.length):console.log("Sorry, only 4 controllers supported")},n.addController=function(e){n.controllers.push(e.controller),console.log("added controller "+e.controllerName)},n.removeControllerAndMenuBlade=function(e){n.menuBlades.splice(n.menuBlades.indexOf(e),1),n.controllers.splice(n.controllers.indexOf(e.controller),1),console.log("removed controller "+e.controllerName);for(var t=0;t<n.menuBlades.length;t++){n.menuBlades[t].location=t+1}},n.connecthandler=function(e){console.log("gamepad connected: "+e.gamepad.index+"/"+e.gamepad.id),n.addgamepad(e.gamepad)},n.scangamepads=function(){console.log("scangamepads");for(var e=navigator.getGamepads?navigator.getGamepads():[],t=0;t<e.length;t++)e[t]&&(console.log("scanned gamepad: "+e[t].index+"/"+e[t].id),e[t].index in n.gamepads?n.gamepads[e[t].index]=e[t]:n.addgamepad(e[t]))},n.disconnecthandler=function(e){console.log("gamepad disconnected: "+e.gamepad.index+"/"+e.gamepad.id),n.removegamepad(e.gamepad)},n.removegamepad=function(e){console.log("removing gamepad: "+e.index+"/"+e.id),delete n.gamepads[e.index];for(var t=0;t<n.menuBlades.length;t++){if(n.menuBlades[t].controllerName==e.index.toString()){n.menuBlades.splice(t,1);break}}},n.addgamepad=function(e){console.log("adding gamepad: "+e.index+"/"+e.id),n.gamepads[e.index]=e;var t=new a(new s(e.index.toString(),e.index),n.showMenuBlade,n.addController,n.removeControllerAndMenuBlade,n.start);n.addAnimatable(t)};var i="ongamepadconnected"in window;n.addAnimation(function(e,t,n){e.fillStyle="black",e.textAlign="center",e.font="22px sans-serif",e.fillText("You can control a blade with a gamepad, the arrow keys or WASD.",t/2,50),e.fillText("Press up to join and down to leave.",t/2,80),e.fillText("Press enter on keyboard or start on a controller to start.",t/2,110)});var o=new a(new r("arrows",37,38,39,40),n.showMenuBlade,n.addController,n.removeControllerAndMenuBlade,t);n.addAnimatable(o);var d=new a(new r("wasd",65,87,68,83),n.showMenuBlade,n.addController,n.removeControllerAndMenuBlade,t);return n.addAnimatable(d),window.addEventListener("gamepadconnected",n.connecthandler),window.addEventListener("gamepaddisconnected",n.disconnecthandler),console.log("haveEvents: "+i),i||setInterval(n.scangamepads,500),n}return d(t,e),t}(o),c=function(){function e(e){var t=this;this.controller=e,this.update=function(e){if(t.rotations>0){var n=t.rotations/1e3*e*Math.PI*2;t.angle=t.angle+n,t.angle=t.angle%(2*Math.PI);var i=.5*t.A*t.cw*t.p*t.vx*Math.abs(t.vx),o=.5*t.A*t.cw*t.p*t.vy*Math.abs(t.vy),a=t.f*t.controller.xAxes-i/t.m,r=t.f*t.controller.yAxes-o/t.m;t.vx+=a*e,t.vy+=r*e,t.x+=t.vx*e,t.y+=t.vy*e}},this.draw=function(e,n,i){var o=t.rotations/t.startRotations*n/4;switch(t.bladeNumber){case 1:e.fillStyle="red",e.fillRect(0,0,o,30);break;case 2:e.fillStyle="green",e.fillRect(n,0,-o,30);break;case 3:e.fillStyle="blue",e.fillRect(0,i,o,-30);break;case 4:e.fillStyle="orange",e.fillRect(n,i,-o,-30);break;default:e.fillStyle="black"}e.save(),e.translate(t.x,t.y),e.rotate(t.angle);var a=Math.sqrt(t.r*t.r/2);e.fillRect(-a,-a,2*a,2*a),e.restore()},this.x=0,this.y=0,this.vx=0,this.vy=0,this.angle=0,this.m=.1,this.f=463,this.r=25,this.startRotations=2124,this.rotations=this.startRotations,this.A=.01,this.cw=.05,this.p=1}return e.prototype.collision=function(){var e=24+(this.vx*this.vx+this.vy*this.vy)/1492;this.rotations-=e,this.rotations<0&&(this.rotations=0)},e}(),h=function(){function e(e,t,n){var i=this;this.blades=e,this.borderRight=t,this.borderBottom=n,this.update=function(e){for(var t=0;t<i.blades.length;t++){var n=i.blades[t];i.wallCollision(n);for(var o=0;o<i.blades.length;o++)if(!(o<=t)){var a=i.blades[o],r=a.x-n.x,s=a.y-n.y,d=Math.sqrt(r*r+s*s);d<=2*n.r&&(console.log("collision"),i.positionCorrection(d,n,r,s,a),i.collisionV2(s,r,n,a))}}},this.draw=function(e,t,n){}}return e.prototype.wallCollision=function(e){e.x-e.r<0?(e.vx=-e.vx,e.x=e.r-e.x+e.r,e.collision()):e.x+e.r>this.borderRight&&(e.vx=-e.vx,e.x=this.borderRight-(e.x+e.r-this.borderRight)-e.r,e.collision()),e.y-e.r<0?(e.vy=-e.vy,e.y=e.r-e.y+e.r,e.collision()):e.y+e.r>this.borderBottom&&(e.vy=-e.vy,e.y=this.borderBottom-(e.y+e.r-this.borderBottom)-e.r,e.collision())},e.prototype.collisionV2=function(e,t,n,i){var o=Math.sqrt(t*t+e*e),a=2*n.vx*n.m,r=2*n.vy*n.m,s=Math.sqrt(a*a+r*r),d=t/o*s,l=e/o*s,c=3*i.vx*i.m,h=3*i.vy*i.m,u=Math.sqrt(c*c+h*h),m=-t/o*u,f=-e/o*u;i.vx+=d/i.m,i.vy+=l/i.m,n.vx+=m/n.m,n.vy+=f/n.m},e.prototype.positionCorrection=function(e,t,n,i,o){var a=(e-2*t.r)/2/e,r=a*n,s=a*i;t.x+=r,t.y+=s,o.x-=r,o.y-=s},e}(),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.started=!1,t.blades=[],t}return u(t,e),t.prototype.start=function(e){if(!this.started){this.started=!0,console.log(e);for(var t=0;t<e.length;t++){var n=e[t],i=new c(n),o=0,a=0;switch(t+1){case 1:o=this.width/3,a=this.height/3;break;case 2:o=this.width/3*2,a=this.height/3;break;case 3:o=this.width/3,a=this.height/3*2;break;case 4:o=this.width/3*2,a=this.height/3*2}i.bladeNumber=t+1,i.x=o,i.y=a,this.blades.push(i),this.addAnimatable(i)}this.addAnimatable(new h(this.blades,this.width,this.height))}},t}(o),f=function(){function e(){var e=this;this.start=function(){e.menu.hide(),e.game.show(),e.game.start(e.menu.controllers)}}return e.prototype.run=function(){this.animation=i.createInBody(),this.menu=new l(this.start),this.game=new m,this.animation.addView(this.menu),this.animation.addView(this.game),this.game.hide()},e}();document.addEventListener("DOMContentLoaded",function(){(new f).run()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy9hbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9tZW51QmxhZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuYy9rZXlib2FyZENvbnRyb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9lbmMvZ2FtZXBhZENvbnRyb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9tZW51Vmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxhZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbGxpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkFuaW1hdGlvbiIsIl90aGlzIiwidGhpcyIsImFuaW1hdGlvbnMiLCJ1cGRhdGVzIiwiaXNSdW5uaW5nIiwiYWRkQW5pbWF0aW9uIiwiZnVuYyIsInB1c2giLCJyZW1vdmVBbmltYXRpb24iLCJzcGxpY2UiLCJpbmRleE9mIiwiYWRkVXBkYXRlIiwicmVtb3ZlVXBkYXRlIiwiYWRkQW5pbWF0YWJsZSIsImFuaW1hdGFibGUiLCJ1cGRhdGUiLCJkcmF3IiwicmVtb3ZlQW5pbWF0YWJsZSIsImFkZFZpZXciLCJ2aWV3Iiwid2lkdGgiLCJoZWlnaHQiLCJyZW1vdmVWaWV3IiwiZnBzIiwiZnBzSW50ZXJ2YWwiLCJhbmltYXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibm93IiwiRGF0ZSIsImVsYXBzZWQiLCJsYXN0RnJhbWVUaW1lIiwidGltZURpZmYiLCJfaSIsIl9hIiwibGVuZ3RoIiwiY3R4IiwiY2xlYXJSZWN0IiwiY2FudmFzIiwiX2IiLCJfYyIsImNyZWF0ZUluQm9keSIsImRvY3VtZW50IiwiYm9keSIsInBhcmVudEVsZW1lbnQiLCJzdHlsZSIsIm1hcmdpbiIsIm92ZXJmbG93IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiYW5pbWF0aW9uIiwiZ2V0Q29udGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleUNvZGUiLCJwbGF5UGF1c2UiLCJjb25zb2xlIiwibG9nIiwic3RhcnRBbmltYXRpb24iLCJyZXNpemUiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInN0b3BBbmltYXRpb24iLCJWaWV3IiwiaXNWaXNpYmxlIiwic2hvdyIsImhpZGUiLCJNZW51QmxhZGUiLCJjb250cm9sbGVyIiwib25TaG93Iiwib25BZGQiLCJvblJlbW92ZSIsInN0YXJ0IiwiaXNTaG93biIsImlzQWRkZWQiLCJhZGRUaW1lclNlY29uZHMiLCJyZW1vdmVUaW1lclNlY29uZHMiLCJyZW1lbWJlcmVkWCIsInJlbWVtYmVyZWRZIiwibG9jYXRpb24iLCJhbmdsZSIsIk1hdGgiLCJQSSIsIngiLCJ4QXhlcyIsInkiLCJ5QXhlcyIsImFkZFRpbWVyIiwiY29sb3IiLCJzdGFydFgiLCJzdGFydFkiLCJmaWxsU3R5bGUiLCJzYXZlIiwidHJhbnNsYXRlIiwicm90YXRlIiwiZmlsbFJlY3QiLCJyZXN0b3JlIiwiS2V5Ym9hcmRDb250cm9scyIsImxlZnRLZXkiLCJ1cEtleSIsInJpZ2h0S2V5IiwiZG93bktleSIsIkdhbWVwYWRDb250cm9scyIsImluZGV4IiwibmF2aWdhdG9yIiwiZ2V0R2FtZXBhZHMiLCJheGVzIiwiYnV0dG9ucyIsInByZXNzZWQiLCJtZW51Vmlld19NZW51VmlldyIsIl9zdXBlciIsIk1lbnVWaWV3IiwibWVudUJsYWRlcyIsImNvbnRyb2xsZXJzIiwiZ2FtZXBhZHMiLCJzaG93TWVudUJsYWRlIiwibWVudUJsYWRlIiwiY29udHJvbGxlck5hbWUiLCJhZGRDb250cm9sbGVyIiwicmVtb3ZlQ29udHJvbGxlckFuZE1lbnVCbGFkZSIsImNvbm5lY3RoYW5kbGVyIiwiZSIsImdhbWVwYWQiLCJpZCIsImFkZGdhbWVwYWQiLCJzY2FuZ2FtZXBhZHMiLCJkaXNjb25uZWN0aGFuZGxlciIsInJlbW92ZWdhbWVwYWQiLCJ0b1N0cmluZyIsImJsYWRlIiwiaGF2ZUV2ZW50cyIsIndpbmRvdyIsInRleHRBbGlnbiIsImZvbnQiLCJmaWxsVGV4dCIsImJsYWRlMSIsImJsYWRlMiIsInNldEludGVydmFsIiwiX19leHRlbmRzIiwiQmxhZGUiLCJyb3RhdGlvbnMiLCJmRnJpY3Rpb25YIiwiQSIsImN3IiwidngiLCJhYnMiLCJmRnJpY3Rpb25ZIiwidnkiLCJheCIsImYiLCJheSIsImxpZmUiLCJzdGFydFJvdGF0aW9ucyIsImJsYWRlTnVtYmVyIiwiY3ViZVNpemUiLCJzcXJ0IiwiY29sbGlzaW9uIiwiZGFtYWdlIiwiQ29sbGlkZXIiLCJibGFkZXMiLCJib3JkZXJSaWdodCIsImJvcmRlckJvdHRvbSIsIndhbGxDb2xsaXNpb24iLCJqIiwiZGlzdGFuY2VYIiwiZGlzdGFuY2VZIiwiZGlzdGFuY2UiLCJwb3NpdGlvbkNvcnJlY3Rpb24iLCJjb2xsaXNpb25WMiIsInAxeCIsInAxeSIsInAxIiwicDF4QW5nbGVkIiwicDF5QW5nbGVkIiwicDJ4IiwicDJ5IiwicDIiLCJwMnhBbmdsZWQiLCJwMnlBbmdsZWQiLCJjb3JyZWN0aW9uRmFjdG9yIiwiY29ycmVjdGlvbngiLCJjb3JyZWN0aW9ueSIsImdhbWVWaWV3X0dhbWVWaWV3IiwiR2FtZVZpZXciLCJhcHBseSIsImFyZ3VtZW50cyIsInN0YXJ0ZWQiLCJnYW1lVmlld19leHRlbmRzIiwiYXBwX0FwcCIsIkFwcCIsIm1lbnUiLCJnYW1lIiwicnVuIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLHlDQ3hFQSxJQUFBQyxFQUFBLFdBZUksU0FBQUEsSUFBQSxJQUFBQyxFQUFBQyxLQVpRQSxLQUFBQyxjQUNBRCxLQUFBRSxXQW1EQUYsS0FBQUcsV0FBWSxFQVFiSCxLQUFBSSxhQUFlLFNBQUNDLEdBQ25CTixFQUFLRSxXQUFXSyxLQUFLRCxJQUdsQkwsS0FBQU8sZ0JBQWtCLFNBQUNGLEdBQ3RCTixFQUFLRSxXQUFXTyxPQUFPVCxFQUFLRSxXQUFXUSxRQUFRSixHQUFPLElBR25ETCxLQUFBVSxVQUFZLFNBQUNMLEdBQ2hCTixFQUFLRyxRQUFRSSxLQUFLRCxJQUdmTCxLQUFBVyxhQUFlLFNBQUNOLEdBQ25CTixFQUFLRyxRQUFRTSxPQUFPVCxFQUFLRyxRQUFRTyxRQUFRSixHQUFPLElBRzdDTCxLQUFBWSxjQUFnQixTQUFDQyxHQUNwQmQsRUFBS0csUUFBUUksS0FBS08sRUFBV0MsUUFDN0JmLEVBQUtFLFdBQVdLLEtBQUtPLEVBQVdFLE9BRzdCZixLQUFBZ0IsaUJBQW1CLFNBQUNILEdBQ3ZCZCxFQUFLRyxRQUFRTSxPQUFPVCxFQUFLRyxRQUFRTyxRQUFRSSxFQUFXQyxRQUFTLEdBQzdEZixFQUFLRSxXQUFXTyxPQUFPVCxFQUFLRSxXQUFXUSxRQUFRSSxFQUFXRSxNQUFPLElBRzlEZixLQUFBaUIsUUFBVSxTQUFDQyxHQUNkbkIsRUFBS2EsY0FBY00sR0FDbkJBLEVBQUtDLE1BQVFwQixFQUFLb0IsTUFDbEJELEVBQUtFLE9BQVNyQixFQUFLcUIsUUFHaEJwQixLQUFBcUIsV0FBYSxTQUFDSCxHQUNqQm5CLEVBQUtpQixpQkFBaUJFLElBSWxCbEIsS0FBQXNCLElBQU0sR0FDTnRCLEtBQUF1QixZQUFjLElBQU92QixLQUFLc0IsSUFFMUJ0QixLQUFBd0IsUUFBVSxXQUNWekIsRUFBS0ksV0FDTHNCLHNCQUFzQjFCLEVBQUt5QixTQUcvQixJQUFJRSxFQUFNQyxLQUFLRCxNQUNYRSxFQUFVRixFQUFNM0IsRUFBSzhCLGNBRXpCLEdBQUlELEVBQVU3QixFQUFLd0IsWUFBYSxDQUM1QnhCLEVBQUs4QixjQUFnQkgsRUFHckIsSUFGQSxJQUFJSSxFQUFXRixFQUFVLElBRUpHLEVBQUEsRUFBQUMsRUFBQWpDLEVBQUtHLFFBQUw2QixFQUFBQyxFQUFBQyxPQUFBRixJQUFjLEVBQy9CakIsRUFEYWtCLEVBQUFELElBQ05ELEdBR1gvQixFQUFLbUMsSUFBSUMsVUFBVSxFQUFHLEVBQUdwQyxFQUFLcUMsT0FBT2pCLE1BQU9wQixFQUFLcUMsT0FBT2hCLFFBRXhELElBQXNCLElBQUFpQixFQUFBLEVBQUFDLEVBQUF2QyxFQUFLRSxXQUFMb0MsRUFBQUMsRUFBQUwsT0FBQUksSUFBaUIsRUFDbkNiLEVBRGNjLEVBQUFELElBQ050QyxFQUFLbUMsSUFBS25DLEVBQUtxQyxPQUFPakIsTUFBT3BCLEVBQUtxQyxPQUFPaEIsV0FJakUsT0F4SEk1QyxPQUFBQyxlQUFXcUIsRUFBQUosVUFBQSxhQUFYLFdBQ0ksT0FBT00sS0FBS29DLE9BQU9qQix1Q0FHdkIzQyxPQUFBQyxlQUFXcUIsRUFBQUosVUFBQSxjQUFYLFdBQ0ksT0FBT00sS0FBS29DLE9BQU9oQix3Q0FNVHRCLEVBQUF5QyxhQUFkLFdBQ0lDLFNBQVNDLEtBQUtDLGNBQWNDLE1BQU12QixPQUFTLE9BQzNDb0IsU0FBU0MsS0FBS0UsTUFBTXZCLE9BQVMsT0FDN0JvQixTQUFTQyxLQUFLRSxNQUFNQyxPQUFTLElBQzdCSixTQUFTQyxLQUFLRSxNQUFNRSxTQUFXLFNBRS9CLElBQUlULEVBQVNJLFNBQVNNLGNBQWMsVUFDcENOLFNBQVNDLEtBQUtNLFlBQVlYLEdBQzFCQSxFQUFPTyxNQUFNeEIsTUFBUSxPQUNyQmlCLEVBQU9PLE1BQU12QixPQUFTLE9BRXRCLElBQUk0QixFQUFZLElBQUlsRCxFQWFwQixPQVpBa0QsRUFBVVosT0FBU0EsRUFDbkJZLEVBQVVkLElBQU1FLEVBQU9hLFdBQVcsTUFFbENULFNBQVNVLGlCQUFpQixRQUFTLFNBQUNDLEdBQ1gsSUFBakJBLEVBQU1DLFNBQ05KLEVBQVVLLFlBRWRDLFFBQVFDLElBQUlKLEVBQU1DLFdBR3RCSixFQUFVUSxpQkFDVlIsRUFBVVMsU0FDSFQsR0FHSmxELEVBQUFKLFVBQUErRCxPQUFQLFdBQ0l6RCxLQUFLb0MsT0FBT2pCLE1BQVFuQixLQUFLb0MsT0FBT3NCLFlBQ2hDMUQsS0FBS29DLE9BQU9oQixPQUFTcEIsS0FBS29DLE9BQU91QixjQUc5QjdELEVBQUFKLFVBQUE4RCxlQUFQLFdBQ0l4RCxLQUFLRyxXQUFZLEVBQ2pCSCxLQUFLNkIsY0FBZ0JGLEtBQUtELE1BQzFCMUIsS0FBS3dCLFdBSUYxQixFQUFBSixVQUFBa0UsY0FBUCxXQUNJNUQsS0FBS0csV0FBWSxHQUVkTCxFQUFBSixVQUFBMkQsVUFBUCxXQUNJckQsS0FBS0csVUFBWUgsS0FBSzRELGdCQUFrQjVELEtBQUt3RCxrQkFrRXJEMUQsRUE5SEEsR0NSQStELEVBQUEsV0F3REEsT0F4REEsZUFBQTlELEVBQUFDLEtBQ1dBLEtBQUFDLGNBQ0FELEtBQUFFLFdBQ0NGLEtBQUE4RCxXQUFZLEVBS2I5RCxLQUFBYyxPQUFTLFNBQUNnQixHQUNiLEdBQUkvQixFQUFLK0QsVUFDTCxJQUFxQixJQUFBL0IsRUFBQSxFQUFBQyxFQUFBakMsRUFBS0csUUFBTDZCLEVBQUFDLEVBQUFDLE9BQUFGLEtBQ2pCakIsRUFEYWtCLEVBQUFELElBQ05ELElBSVo5QixLQUFBZSxLQUFPLFNBQUNtQixFQUErQmYsRUFBZ0JDLEdBQzFELEdBQUlyQixFQUFLK0QsVUFDTCxJQUFzQixJQUFBL0IsRUFBQSxFQUFBQyxFQUFBakMsRUFBS0UsV0FBTDhCLEVBQUFDLEVBQUFDLE9BQUFGLEtBQ2xCUCxFQURjUSxFQUFBRCxJQUNORyxFQUFLZixFQUFPQyxJQUt6QnBCLEtBQUErRCxLQUFPLFdBQ1ZoRSxFQUFLK0QsV0FBWSxHQUdkOUQsS0FBQWdFLEtBQU8sV0FDVmpFLEVBQUsrRCxXQUFZLEdBR2Q5RCxLQUFBSSxhQUFlLFNBQUNDLEdBQ25CTixFQUFLRSxXQUFXSyxLQUFLRCxJQUdsQkwsS0FBQU8sZ0JBQWtCLFNBQUNGLEdBQ3RCTixFQUFLRSxXQUFXTyxPQUFPVCxFQUFLRSxXQUFXUSxRQUFRSixHQUFPLElBR25ETCxLQUFBVSxVQUFZLFNBQUNMLEdBQ2hCTixFQUFLRyxRQUFRSSxLQUFLRCxJQUdmTCxLQUFBVyxhQUFlLFNBQUNOLEdBQ25CTixFQUFLRyxRQUFRTSxPQUFPVCxFQUFLRyxRQUFRTyxRQUFRSixHQUFPLElBRzdDTCxLQUFBWSxjQUFnQixTQUFDQyxHQUNwQmQsRUFBS0csUUFBUUksS0FBS08sRUFBV0MsUUFDN0JmLEVBQUtFLFdBQVdLLEtBQUtPLEVBQVdFLE9BRzdCZixLQUFBZ0IsaUJBQW1CLFNBQUNILEdBQ3ZCZCxFQUFLRyxRQUFRTSxPQUFPVCxFQUFLRyxRQUFRTyxRQUFRSSxFQUFXQyxRQUFTLEdBQzdEZixFQUFLRSxXQUFXTyxPQUFPVCxFQUFLRSxXQUFXUSxRQUFRSSxFQUFXRSxNQUFPLEtBdER6RSxHQ0NBa0QsRUFBQSxXQW9CSSxTQUFBQSxFQUFtQkMsRUFBZ0NDLEVBQTRDQyxFQUEyQ0MsRUFBOENDLEdBQXhMLElBQUF2RSxFQUFBQyxLQUFtQkEsS0FBQWtFLGFBQWdDbEUsS0FBQW1FLFNBQTRDbkUsS0FBQW9FLFFBQTJDcEUsS0FBQXFFLFdBQThDckUsS0FBQXNFLFFBbEJoTHRFLEtBQUF1RSxTQUFVLEVBQ1Z2RSxLQUFBd0UsU0FBVSxFQUVWeEUsS0FBQXlFLGdCQUFrQixJQUNsQnpFLEtBQUEwRSxtQkFBcUIsSUFHckIxRSxLQUFBMkUsWUFBYyxFQUNkM0UsS0FBQTRFLFlBQWMsRUFFZjVFLEtBQUE2RSxTQUFXLEVBZ0JYN0UsS0FBQWMsT0FBUyxTQUFDZ0IsR0FDVC9CLEVBQUt3RSxRQUNEeEUsRUFBS3lFLFNBQ0x6RSxFQUFLK0UsTUFBUS9FLEVBQUsrRSxNQUFRQyxLQUFLQyxHQUFLLEVBQ3BDakYsRUFBSytFLE1BQVEvRSxFQUFLK0UsT0FBbUIsRUFBVkMsS0FBS0MsSUFDaENqRixFQUFLa0YsRUFBSWxGLEVBQUs0RSxZQUFzQyxHQUF4QjVFLEVBQUttRSxXQUFXZ0IsTUFDNUNuRixFQUFLb0YsRUFBSXBGLEVBQUs2RSxZQUFzQyxHQUF4QjdFLEVBQUttRSxXQUFXa0IsTUFFeENyRixFQUFLbUUsV0FBV2tCLE1BQVEsSUFDeEJyRixFQUFLc0YsVUFBWXRGLEVBQUttRSxXQUFXa0IsTUFBUXRELEVBQ3JDL0IsRUFBS3NGLFVBQVl0RixFQUFLMkUscUJBQ3RCM0UsRUFBS3NGLFNBQVcsRUFDaEJ0RixFQUFLd0UsU0FBVSxFQUNmeEUsRUFBS3lFLFNBQVUsRUFDZnpFLEVBQUtzRSxTQUFTdEUsS0FFWEEsRUFBS21FLFdBQVdrQixNQUFRLEtBQy9CckYsRUFBS3NGLFNBQVcsR0FHaEJ0RixFQUFLbUUsV0FBV0ksUUFDaEJoQixRQUFRQyxJQUFJLFNBQ1p4RCxFQUFLdUUsVUFHTHZFLEVBQUttRSxXQUFXa0IsT0FBUyxJQUN6QnJGLEVBQUtzRixVQUFZdEYsRUFBS21FLFdBQVdrQixNQUFRdEQsRUFFckMvQixFQUFLc0YsVUFBWXRGLEVBQUswRSxrQkFDdEIxRSxFQUFLcUUsTUFBTXJFLEdBQ1hBLEVBQUt5RSxTQUFVLEVBQ2Z6RSxFQUFLc0YsU0FBVyxJQUVidEYsRUFBS21FLFdBQVdrQixPQUFTLEtBQ2hDckYsRUFBS3NGLFNBQVcsRUFDaEJ0RixFQUFLd0UsU0FBVSxFQUNmeEUsRUFBS3NFLFNBQVN0RSxJQUlsQkEsRUFBS21FLFdBQVdrQixPQUFTLEtBQ3pCckYsRUFBS29FLE9BQU9wRSxHQUNaQSxFQUFLd0UsU0FBVSxFQUNmeEUsRUFBS3NGLFVBQVl0RixFQUFLbUUsV0FBV2tCLE1BQVF0RCxJQUk5QzlCLEtBQUFlLEtBQU8sU0FBQ21CLEVBQStCZixFQUFnQkMsR0FDMUQsR0FBSXJCLEVBQUs4RSxTQUFXLEVBQUcsQ0FDbkJ2QixRQUFRQyxJQUFJeEQsRUFBSzhFLFVBRWpCLElBQUlTLEVBQVEsUUFDUkMsRUFBUyxFQUNUQyxFQUFTLEVBQ2IsT0FBUXpGLEVBQUs4RSxVQUNULEtBQUssRUFDRFMsRUFBUSxNQUNSQyxFQUFTcEUsRUFBUSxFQUNqQnFFLEdBQVVwRSxFQUFTLEtBQU8sRUFBSSxJQUM5QixNQUNKLEtBQUssRUFDRGtFLEVBQVEsUUFDUkMsRUFBU3BFLEVBQVEsRUFBSSxFQUNyQnFFLEdBQVVwRSxFQUFTLEtBQU8sRUFBSSxJQUM5QixNQUNKLEtBQUssRUFDRGtFLEVBQVEsT0FDUkMsRUFBU3BFLEVBQVEsRUFDakJxRSxHQUFVcEUsRUFBUyxLQUFPLEVBQUksRUFBSSxJQUNsQyxNQUNKLEtBQUssRUFDRGtFLEVBQVEsU0FDUkMsRUFBU3BFLEVBQVEsRUFBSSxFQUNyQnFFLEdBQVVwRSxFQUFTLEtBQU8sRUFBSSxFQUFJLElBRzFDckIsRUFBS3VGLE1BQVFBLEVBQ2J2RixFQUFLa0YsRUFBSU0sRUFDVHhGLEVBQUtvRixFQUFJSyxFQUNUekYsRUFBSzRFLFlBQWNZLEVBQ25CeEYsRUFBSzZFLFlBQWNZLEVBRW5CekYsRUFBSzhFLFNBQVcsRUFHcEIzQyxFQUFJdUQsVUFBWTFGLEVBQUt1RixNQUNyQnBELEVBQUl3RCxPQUNKeEQsRUFBSXlELFVBQVU1RixFQUFLa0YsRUFBR2xGLEVBQUtvRixHQUN2QnBGLEVBQUt5RSxVQUNMdEMsRUFBSXdELE9BQ0p4RCxFQUFJMEQsT0FBTzdGLEVBQUsrRSxPQUNoQjVDLEVBQUkyRCxVQUFVLElBQUssR0FBSSxHQUFJLElBQzNCM0QsRUFBSTRELFdBR0ovRixFQUFLd0UsVUFBWXhFLEVBQUt5RSxTQUN0QnRDLEVBQUkyRCxVQUFVLEdBQUksR0FBSSxHQUFLOUYsRUFBSzBFLGdCQUFrQjFFLEVBQUtzRixTQUFVLElBR2pFdEYsRUFBS3dFLFNBQVd4RSxFQUFLeUUsU0FBV3pFLEVBQUtzRixTQUFXLEdBQ2hEbkQsRUFBSTJELFVBQVUsR0FBSSxHQUFJLEdBQUssR0FBSzlGLEVBQUsyRSxtQkFBcUIzRSxFQUFLc0YsU0FBVSxJQUc3RW5ELEVBQUk0RCxXQTlHSjlGLEtBQUtzRixNQUFRLFFBQ2J0RixLQUFLaUYsRUFBSSxFQUNUakYsS0FBS21GLEVBQUksRUFDVG5GLEtBQUs4RSxNQUFRLEVBQ2I5RSxLQUFLcUYsU0FBVyxFQTRHeEIsT0FySEk3RyxPQUFBQyxlQUFXd0YsRUFBQXZFLFVBQUEsc0JBQVgsV0FDSSxPQUFPTSxLQUFLa0UsV0FBVzdGLHNDQW9IL0I0RixFQXJJQSxHQ0RBOEIsRUFBQSxXQXVEQSxPQWpESSxTQUFtQjFILEVBQWMySCxFQUFpQkMsRUFBZUMsRUFBa0JDLEdBQW5GLElBQUFwRyxFQUFBQyxLQUFtQkEsS0FBQTNCLE9BQ2YyQixLQUFLa0YsTUFBUSxFQUNibEYsS0FBS29GLE1BQVEsRUFDYnBGLEtBQUtzRSxPQUFRLEVBRWI5QixTQUFTVSxpQkFBaUIsVUFBVyxTQUFDQyxHQUM5QkEsRUFBTUMsU0FBVzRDLElBQ2pCakcsRUFBS21GLE9BQVMsR0FFZC9CLEVBQU1DLFNBQVc2QyxJQUNqQmxHLEVBQUtxRixPQUFTLEdBRWRqQyxFQUFNQyxTQUFXOEMsSUFDakJuRyxFQUFLbUYsTUFBUSxHQUViL0IsRUFBTUMsU0FBVytDLElBQ2pCcEcsRUFBS3FGLE1BQVEsR0FFSSxJQUFqQmpDLEVBQU1DLFVBQ05yRCxFQUFLdUUsT0FBUSxLQUlyQjlCLFNBQVNVLGlCQUFpQixRQUFTLFNBQUNDLEdBQzVCQSxFQUFNQyxTQUFXNEMsSUFDYmpHLEVBQUttRixPQUFTLEtBQ2RuRixFQUFLbUYsTUFBUSxHQUdqQi9CLEVBQU1DLFNBQVc2QyxJQUNibEcsRUFBS3FGLE9BQVMsS0FDZHJGLEVBQUtxRixNQUFRLEdBR2pCakMsRUFBTUMsU0FBVzhDLElBQ2JuRyxFQUFLbUYsTUFBUSxLQUNibkYsRUFBS21GLE1BQVEsR0FHakIvQixFQUFNQyxTQUFXK0MsSUFDYnBHLEVBQUtxRixNQUFRLEtBQ2JyRixFQUFLcUYsTUFBUSxHQUdBLElBQWpCakMsRUFBTUMsVUFDTnJELEVBQUt1RSxPQUFRLE1BbkQ3QixHQ0FBOEIsRUFBQSxXQW1CSSxTQUFBQSxFQUFtQi9ILEVBQXNCZ0ksR0FBdEJyRyxLQUFBM0IsT0FBc0IyQixLQUFBcUcsUUFFN0MsT0FwQkk3SCxPQUFBQyxlQUFXMkgsRUFBQTFHLFVBQUEsYUFBWCxXQUdJLE9BRmU0RyxVQUFVQyxjQUNQdkcsS0FBS3FHLE9BQ2JHLEtBQUssb0NBR25CaEksT0FBQUMsZUFBVzJILEVBQUExRyxVQUFBLGFBQVgsV0FHSSxPQUZlNEcsVUFBVUMsY0FDUHZHLEtBQUtxRyxPQUNiRyxLQUFLLG9DQUduQmhJLE9BQUFDLGVBQVcySCxFQUFBMUcsVUFBQSxhQUFYLFdBR0ksT0FGZTRHLFVBQVVDLGNBQ1B2RyxLQUFLcUcsT0FDYkksUUFBUSxHQUFHQyx5Q0FLN0JOLEVBckJBLDhVQ0lBTyxFQUFBLFNBQUFDLEdBS0ksU0FBQUMsRUFBb0J2QyxHQUFwQixJQUFBdkUsRUFDSTZHLEVBQUEzSSxLQUFBK0IsT0FBT0EsS0FEU0QsRUFBQXVFLFFBSlp2RSxFQUFBK0csY0FDRC9HLEVBQUFnSCxlQUNDaEgsRUFBQWlILFlBNEJBakgsRUFBQWtILGNBQWdCLFNBQUNDLEdBQ3JCNUQsUUFBUUMsSUFBSTJELEVBQVVDLGdCQUVsQnBILEVBQUsrRyxXQUFXN0UsUUFBVSxHQUMxQmxDLEVBQUsrRyxXQUFXeEcsS0FBSzRHLEdBQ3JCQSxFQUFVckMsU0FBVzlFLEVBQUsrRyxXQUFXN0UsUUFFckNxQixRQUFRQyxJQUFJLHdDQUlaeEQsRUFBQXFILGNBQWdCLFNBQUNGLEdBQ3JCbkgsRUFBS2dILFlBQVl6RyxLQUFLNEcsRUFBVWhELFlBQ2hDWixRQUFRQyxJQUFJLG9CQUFzQjJELEVBQVVDLGlCQUd4Q3BILEVBQUFzSCw2QkFBK0IsU0FBQ0gsR0FDcENuSCxFQUFLK0csV0FBV3RHLE9BQU9ULEVBQUsrRyxXQUFXckcsUUFBUXlHLEdBQVksR0FDM0RuSCxFQUFLZ0gsWUFBWXZHLE9BQU9ULEVBQUtnSCxZQUFZdEcsUUFBUXlHLEVBQVVoRCxZQUFhLEdBRXhFWixRQUFRQyxJQUFJLHNCQUF3QjJELEVBQVVDLGdCQUM5QyxJQUFLLElBQUlySixFQUFJLEVBQUdBLEVBQUlpQyxFQUFLK0csV0FBVzdFLE9BQVFuRSxJQUFLLENBQzNCaUMsRUFBSytHLFdBQVdoSixHQUN4QitHLFNBQVcvRyxFQUFJLElBSWpDaUMsRUFBQXVILGVBQWlCLFNBQUNDLEdBQ2RqRSxRQUFRQyxJQUFJLHNCQUF3QmdFLEVBQUVDLFFBQVFuQixNQUFRLElBQU1rQixFQUFFQyxRQUFRQyxJQUN0RTFILEVBQUsySCxXQUFXSCxFQUFFQyxVQUd0QnpILEVBQUE0SCxhQUFlLFdBQ1hyRSxRQUFRQyxJQUFJLGdCQUdaLElBREEsSUFBSXlELEVBQVdWLFVBQVVDLFlBQWNELFVBQVVDLGlCQUN4Q3pJLEVBQUksRUFBR0EsRUFBSWtKLEVBQVMvRSxPQUFRbkUsSUFDN0JrSixFQUFTbEosS0FDVHdGLFFBQVFDLElBQUksb0JBQXNCeUQsRUFBU2xKLEdBQUd1SSxNQUFRLElBQU1XLEVBQVNsSixHQUFHMkosSUFDcEVULEVBQVNsSixHQUFHdUksU0FBU3RHLEVBQUtpSCxTQUMxQmpILEVBQUtpSCxTQUFTQSxFQUFTbEosR0FBR3VJLE9BQVNXLEVBQVNsSixHQUU1Q2lDLEVBQUsySCxXQUFXVixFQUFTbEosTUFNekNpQyxFQUFBNkgsa0JBQW9CLFNBQUNMLEdBQ2pCakUsUUFBUUMsSUFBSSx5QkFBMkJnRSxFQUFFQyxRQUFRbkIsTUFBUSxJQUFNa0IsRUFBRUMsUUFBUUMsSUFDekUxSCxFQUFLOEgsY0FBY04sRUFBRUMsVUFHekJ6SCxFQUFBOEgsY0FBZ0IsU0FBQ0wsR0FDYmxFLFFBQVFDLElBQUkscUJBQXVCaUUsRUFBUW5CLE1BQVEsSUFBTW1CLEVBQVFDLFdBQzFEMUgsRUFBS2lILFNBQVNRLEVBQVFuQixPQUM3QixJQUFLLElBQUl2SSxFQUFJLEVBQUdBLEVBQUlpQyxFQUFLK0csV0FBVzdFLE9BQVFuRSxJQUFLLENBRTdDLEdBRGtCaUMsRUFBSytHLFdBQVdoSixHQUNwQnFKLGdCQUFrQkssRUFBUW5CLE1BQU15QixXQUFZLENBQ3REL0gsRUFBSytHLFdBQVd0RyxPQUFPMUMsRUFBRyxHQUMxQixTQUtaaUMsRUFBQTJILFdBQWEsU0FBQ0YsR0FDVmxFLFFBQVFDLElBQUksbUJBQXFCaUUsRUFBUW5CLE1BQVEsSUFBTW1CLEVBQVFDLElBRS9EMUgsRUFBS2lILFNBQVNRLEVBQVFuQixPQUFTbUIsRUFDL0IsSUFBSU8sRUFBUSxJQUFJOUQsRUFBVSxJQUFJbUMsRUFBZ0JvQixFQUFRbkIsTUFBTXlCLFdBQVlOLEVBQVFuQixPQUFRdEcsRUFBS2tILGNBQWVsSCxFQUFLcUgsY0FBZXJILEVBQUtzSCw2QkFBOEJ0SCxFQUFLdUUsT0FDeEt2RSxFQUFLYSxjQUFjbUgsSUE5Rm5CLElBQUlDLEVBQWEsdUJBQXdCQyxPQUN6Q2xJLEVBQUtLLGFBQWEsU0FBQzhCLEVBQUtmLEVBQU9DLEdBQzNCYyxFQUFJdUQsVUFBWSxRQUNoQnZELEVBQUlnRyxVQUFZLFNBQ2hCaEcsRUFBSWlHLEtBQU8sa0JBQ1hqRyxFQUFJa0csU0FBUyxrRUFBbUVqSCxFQUFRLEVBQUcsSUFDM0ZlLEVBQUlrRyxTQUFTLHNDQUF1Q2pILEVBQVEsRUFBRyxJQUMvRGUsRUFBSWtHLFNBQVMsNkRBQThEakgsRUFBUSxFQUFHLE9BRTFGLElBQUlrSCxFQUFTLElBQUlwRSxFQUFVLElBQUk4QixFQUFpQixTQUFVLEdBQUksR0FBSSxHQUFJLElBQUtoRyxFQUFLa0gsY0FBZWxILEVBQUtxSCxjQUFlckgsRUFBS3NILDZCQUE4Qi9DLEdBQ3RKdkUsRUFBS2EsY0FBY3lILEdBQ25CLElBQUlDLEVBQVMsSUFBSXJFLEVBQVUsSUFBSThCLEVBQWlCLE9BQVEsR0FBSSxHQUFJLEdBQUksSUFBS2hHLEVBQUtrSCxjQUFlbEgsRUFBS3FILGNBQWVySCxFQUFLc0gsNkJBQThCL0MsVUFDcEp2RSxFQUFLYSxjQUFjMEgsR0FFbkJMLE9BQU8vRSxpQkFBaUIsbUJBQW9CbkQsRUFBS3VILGdCQUNqRFcsT0FBTy9FLGlCQUFpQixzQkFBdUJuRCxFQUFLNkgsbUJBRXBEdEUsUUFBUUMsSUFBSSxlQUFpQnlFLEdBRXhCQSxHQUNETyxZQUFZeEksRUFBSzRILGFBQWMsT0E0RTNDLE9Bdkc4QmEsRUFBQTNCLEVBQUFELEdBdUc5QkMsRUF2R0EsQ0FBOEJoRCxHQ0g5QjRFLEVBQUEsV0FnQkksU0FBQUEsRUFBb0J2RSxHQUFwQixJQUFBbkUsRUFBQUMsS0FBb0JBLEtBQUFrRSxhQXlCYmxFLEtBQUFjLE9BQVMsU0FBQ2dCLEdBQ2IsR0FBSS9CLEVBQUsySSxVQUFZLEVBQUcsQ0FDcEIsSUFBSTlDLEVBQVM3RixFQUFLMkksVUFBWSxJQUFPNUcsRUFBV2lELEtBQUtDLEdBQUssRUFDMURqRixFQUFLK0UsTUFBUS9FLEVBQUsrRSxNQUFRYyxFQUMxQjdGLEVBQUsrRSxNQUFRL0UsRUFBSytFLE9BQW1CLEVBQVZDLEtBQUtDLElBRWhDLElBQUkyRCxFQUFhLEdBQU01SSxFQUFLNkksRUFBSTdJLEVBQUs4SSxHQUFLOUksRUFBS0gsRUFBSUcsRUFBSytJLEdBQUsvRCxLQUFLZ0UsSUFBSWhKLEVBQUsrSSxJQUN2RUUsRUFBYSxHQUFNakosRUFBSzZJLEVBQUk3SSxFQUFLOEksR0FBSzlJLEVBQUtILEVBQUlHLEVBQUtrSixHQUFLbEUsS0FBS2dFLElBQUloSixFQUFLa0osSUFFdkVDLEVBQUtuSixFQUFLb0osRUFBSXBKLEVBQUttRSxXQUFXZ0IsTUFBUXlELEVBQWE1SSxFQUFLN0IsRUFDeERrTCxFQUFLckosRUFBS29KLEVBQUlwSixFQUFLbUUsV0FBV2tCLE1BQVE0RCxFQUFhakosRUFBSzdCLEVBRTVENkIsRUFBSytJLElBQU1JLEVBQUtwSCxFQUNoQi9CLEVBQUtrSixJQUFNRyxFQUFLdEgsRUFFaEIvQixFQUFLa0YsR0FBS2xGLEVBQUsrSSxHQUFLaEgsRUFDcEIvQixFQUFLb0YsR0FBS3BGLEVBQUtrSixHQUFLbkgsSUFJckI5QixLQUFBZSxLQUFPLFNBQUNtQixFQUErQmYsRUFBZ0JDLEdBRTFELElBQUlpSSxFQUFPdEosRUFBSzJJLFVBQVkzSSxFQUFLdUosZUFBaUJuSSxFQUFRLEVBQzFELE9BQVFwQixFQUFLd0osYUFDVCxLQUFLLEVBQ0RySCxFQUFJdUQsVUFBWSxNQUNoQnZELEVBQUkyRCxTQUFTLEVBQUcsRUFBR3dELEVBQU0sSUFDekIsTUFDSixLQUFLLEVBQ0RuSCxFQUFJdUQsVUFBWSxRQUNoQnZELEVBQUkyRCxTQUFTMUUsRUFBTyxHQUFJa0ksRUFBTSxJQUM5QixNQUNKLEtBQUssRUFDRG5ILEVBQUl1RCxVQUFZLE9BQ2hCdkQsRUFBSTJELFNBQVMsRUFBR3pFLEVBQVFpSSxHQUFPLElBQy9CLE1BQ0osS0FBSyxFQUNEbkgsRUFBSXVELFVBQVksU0FDaEJ2RCxFQUFJMkQsU0FBUzFFLEVBQU9DLEdBQVNpSSxHQUFPLElBQ3BDLE1BQ0osUUFDSW5ILEVBQUl1RCxVQUFZLFFBSXhCdkQsRUFBSXdELE9BRUp4RCxFQUFJeUQsVUFBVTVGLEVBQUtrRixFQUFHbEYsRUFBS29GLEdBQzNCakQsRUFBSTBELE9BQU83RixFQUFLK0UsT0FDaEIsSUFBSTBFLEVBQVd6RSxLQUFLMEUsS0FBSzFKLEVBQUtuQixFQUFJbUIsRUFBS25CLEVBQUksR0FDM0NzRCxFQUFJMkQsVUFBVTJELEdBQVdBLEVBQXFCLEVBQVhBLEVBQXlCLEVBQVhBLEdBQ2pEdEgsRUFBSTRELFdBM0VKOUYsS0FBS2lGLEVBQUksRUFDVGpGLEtBQUttRixFQUFJLEVBQ1RuRixLQUFLOEksR0FBSyxFQUNWOUksS0FBS2lKLEdBQUssRUFDVmpKLEtBQUs4RSxNQUFRLEVBQ2I5RSxLQUFLOUIsRUFBSSxHQUNUOEIsS0FBS21KLEVBQUksSUFDVG5KLEtBQUtwQixFQUFJLEdBQ1RvQixLQUFLc0osZUFBaUIsS0FDdEJ0SixLQUFLMEksVUFBWTFJLEtBQUtzSixlQUV0QnRKLEtBQUs0SSxFQUFJLElBQ1Q1SSxLQUFLNkksR0FBSyxJQUNWN0ksS0FBS0osRUFBSSxFQWdFakIsT0E3RFc2SSxFQUFBL0ksVUFBQWdLLFVBQVAsV0FDSSxJQUFJQyxFQUFTLElBQU0zSixLQUFLOEksR0FBSzlJLEtBQUs4SSxHQUFLOUksS0FBS2lKLEdBQUtqSixLQUFLaUosSUFBTSxLQUM1RGpKLEtBQUswSSxXQUFhaUIsRUFDZDNKLEtBQUswSSxVQUFZLElBQ2pCMUksS0FBSzBJLFVBQVksSUF5RDdCRCxFQTlGQSxHQ0FBbUIsRUFBQSxXQUVJLFNBQUFBLEVBQW9CQyxFQUF5QkMsRUFBNkJDLEdBQTFFLElBQUFoSyxFQUFBQyxLQUFvQkEsS0FBQTZKLFNBQXlCN0osS0FBQThKLGNBQTZCOUosS0FBQStKLGVBR25FL0osS0FBQWMsT0FBUyxTQUFDZ0IsR0FDYixJQUFLLElBQUloRSxFQUFJLEVBQUdBLEVBQUlpQyxFQUFLOEosT0FBTzVILE9BQVFuRSxJQUFLLENBQ3pDLElBQU1pSyxFQUFRaEksRUFBSzhKLE9BQU8vTCxHQUMxQmlDLEVBQUtpSyxjQUFjakMsR0FFbkIsSUFBSyxJQUFJa0MsRUFBSSxFQUFHQSxFQUFJbEssRUFBSzhKLE9BQU81SCxPQUFRZ0ksSUFDcEMsS0FBSUEsR0FBS25NLEdBQVQsQ0FHQSxJQUFNd0ssRUFBU3ZJLEVBQUs4SixPQUFPSSxHQUN2QkMsRUFBWTVCLEVBQU9yRCxFQUFJOEMsRUFBTTlDLEVBQzdCa0YsRUFBWTdCLEVBQU9uRCxFQUFJNEMsRUFBTTVDLEVBQzdCaUYsRUFBV3JGLEtBQUswRSxLQUFLUyxFQUFZQSxFQUFZQyxFQUFZQSxHQUV6REMsR0FBc0IsRUFBVnJDLEVBQU1uSixJQUNsQjBFLFFBQVFDLElBQUksYUFDWnhELEVBQUtzSyxtQkFBbUJELEVBQVVyQyxFQUFPbUMsRUFBV0MsRUFBVzdCLEdBQy9EdkksRUFBS3VLLFlBQVlILEVBQVdELEVBQVduQyxFQUFPTyxPQU12RHRJLEtBQUFlLEtBQU8sU0FBQ21CLEVBQStCZixFQUFnQkMsS0F1RGxFLE9BcERZd0ksRUFBQWxLLFVBQUFzSyxjQUFSLFNBQXNCakMsR0FDZEEsRUFBTTlDLEVBQUk4QyxFQUFNbkosRUFBSSxHQUNwQm1KLEVBQU1lLElBQU1mLEVBQU1lLEdBQ2xCZixFQUFNOUMsRUFBSThDLEVBQU1uSixFQUFJbUosRUFBTTlDLEVBQUk4QyxFQUFNbkosRUFDcENtSixFQUFNMkIsYUFFRDNCLEVBQU05QyxFQUFJOEMsRUFBTW5KLEVBQUlvQixLQUFLOEosY0FDOUIvQixFQUFNZSxJQUFNZixFQUFNZSxHQUNsQmYsRUFBTTlDLEVBQUlqRixLQUFLOEosYUFBZS9CLEVBQU05QyxFQUFJOEMsRUFBTW5KLEVBQUlvQixLQUFLOEosYUFBZS9CLEVBQU1uSixFQUM1RW1KLEVBQU0yQixhQUVOM0IsRUFBTTVDLEVBQUk0QyxFQUFNbkosRUFBSSxHQUNwQm1KLEVBQU1rQixJQUFNbEIsRUFBTWtCLEdBQ2xCbEIsRUFBTTVDLEVBQUk0QyxFQUFNbkosRUFBSW1KLEVBQU01QyxFQUFJNEMsRUFBTW5KLEVBQ3BDbUosRUFBTTJCLGFBRUQzQixFQUFNNUMsRUFBSTRDLEVBQU1uSixFQUFJb0IsS0FBSytKLGVBQzlCaEMsRUFBTWtCLElBQU1sQixFQUFNa0IsR0FDbEJsQixFQUFNNUMsRUFBSW5GLEtBQUsrSixjQUFnQmhDLEVBQU01QyxFQUFJNEMsRUFBTW5KLEVBQUlvQixLQUFLK0osY0FBZ0JoQyxFQUFNbkosRUFDOUVtSixFQUFNMkIsY0FJTkUsRUFBQWxLLFVBQUE0SyxZQUFSLFNBQW9CSCxFQUFtQkQsRUFBbUI3QixFQUFlQyxHQUNyRSxJQUFJOEIsRUFBV3JGLEtBQUswRSxLQUFLUyxFQUFZQSxFQUFZQyxFQUFZQSxHQUN6REksRUFBa0IsRUFBWmxDLEVBQU9TLEdBQVNULEVBQU9uSyxFQUM3QnNNLEVBQWtCLEVBQVpuQyxFQUFPWSxHQUFTWixFQUFPbkssRUFDN0J1TSxFQUFLMUYsS0FBSzBFLEtBQUtjLEVBQU1BLEVBQU1DLEVBQU1BLEdBQ2pDRSxFQUFZUixFQUFZRSxFQUFXSyxFQUNuQ0UsRUFBWVIsRUFBWUMsRUFBV0ssRUFFbkNHLEVBQWtCLEVBQVp0QyxFQUFPUSxHQUFTUixFQUFPcEssRUFDN0IyTSxFQUFrQixFQUFadkMsRUFBT1csR0FBU1gsRUFBT3BLLEVBQzdCNE0sRUFBSy9GLEtBQUswRSxLQUFLbUIsRUFBTUEsRUFBTUMsRUFBTUEsR0FDakNFLEdBQWFiLEVBQVlFLEVBQVdVLEVBQ3BDRSxHQUFhYixFQUFZQyxFQUFXVSxFQUN4Q3hDLEVBQU9RLElBQU00QixFQUFZcEMsRUFBT3BLLEVBQ2hDb0ssRUFBT1csSUFBTTBCLEVBQVlyQyxFQUFPcEssRUFDaENtSyxFQUFPUyxJQUFNaUMsRUFBWTFDLEVBQU9uSyxFQUNoQ21LLEVBQU9ZLElBQU0rQixFQUFZM0MsRUFBT25LLEdBRzVCMEwsRUFBQWxLLFVBQUEySyxtQkFBUixTQUEyQkQsRUFBa0JyQyxFQUFjbUMsRUFBbUJDLEVBQW1CN0IsR0FDN0YsSUFDSTJDLEdBRGNiLEVBQXFCLEVBQVZyQyxFQUFNbkosR0FBUyxFQUNSd0wsRUFDaENjLEVBQWNELEVBQW1CZixFQUNqQ2lCLEVBQWNGLEVBQW1CZCxFQUNyQ3BDLEVBQU05QyxHQUFLaUcsRUFDWG5ELEVBQU01QyxHQUFLZ0csRUFDWDdDLEVBQU9yRCxHQUFLaUcsRUFDWjVDLEVBQU9uRCxHQUFLZ0csR0FFcEJ2QixFQW5GQSw4VUNFQXdCLEVBQUEsU0FBQXhFLEdBQUEsU0FBQXlFLElBQUEsSUFBQXRMLEVBQUEsT0FBQTZHLEtBQUEwRSxNQUFBdEwsS0FBQXVMLFlBQUF2TCxZQUVZRCxFQUFBeUwsU0FBVSxFQUVWekwsRUFBQThKLFlBd0NaLE9BNUM4QjRCLEVBQUFKLEVBQUF6RSxHQUtuQnlFLEVBQUEzTCxVQUFBNEUsTUFBUCxTQUFheUMsR0FDVCxJQUFJL0csS0FBS3dMLFFBQVQsQ0FHQXhMLEtBQUt3TCxTQUFVLEVBRWZsSSxRQUFRQyxJQUFJd0QsR0FFWixJQUFLLElBQUlqSixFQUFJLEVBQUdBLEVBQUlpSixFQUFZOUUsT0FBUW5FLElBQUssQ0FDekMsSUFBTW9HLEVBQWE2QyxFQUFZakosR0FDM0JpSyxFQUFRLElBQUlVLEVBQU12RSxHQUNsQnFCLEVBQVMsRUFDVEMsRUFBUyxFQUNiLE9BQVExSCxFQUFJLEdBQ1IsS0FBSyxFQUNEeUgsRUFBU3ZGLEtBQUttQixNQUFRLEVBQ3RCcUUsRUFBU3hGLEtBQUtvQixPQUFTLEVBQ3ZCLE1BQ0osS0FBSyxFQUNEbUUsRUFBU3ZGLEtBQUttQixNQUFRLEVBQUksRUFDMUJxRSxFQUFTeEYsS0FBS29CLE9BQVMsRUFDdkIsTUFDSixLQUFLLEVBQ0RtRSxFQUFTdkYsS0FBS21CLE1BQVEsRUFDdEJxRSxFQUFTeEYsS0FBS29CLE9BQVMsRUFBSSxFQUMzQixNQUNKLEtBQUssRUFDRG1FLEVBQVN2RixLQUFLbUIsTUFBUSxFQUFJLEVBQzFCcUUsRUFBU3hGLEtBQUtvQixPQUFTLEVBQUksRUFHbkMyRyxFQUFNd0IsWUFBY3pMLEVBQUksRUFDeEJpSyxFQUFNOUMsRUFBSU0sRUFDVndDLEVBQU01QyxFQUFJSyxFQUNWeEYsS0FBSzZKLE9BQU92SixLQUFLeUgsR0FDakIvSCxLQUFLWSxjQUFjbUgsR0FFdkIvSCxLQUFLWSxjQUFjLElBQUlnSixFQUFTNUosS0FBSzZKLE9BQVE3SixLQUFLbUIsTUFBT25CLEtBQUtvQixXQUV0RWlLLEVBNUNBLENBQThCeEgsR0NBOUI2SCxFQUFBLG9CQUFBQyxJQUFBLElBQUE1TCxFQUFBQyxLQWNZQSxLQUFBc0UsTUFBUSxXQUNadkUsRUFBSzZMLEtBQUs1SCxPQUNWakUsRUFBSzhMLEtBQUs5SCxPQUNWaEUsRUFBSzhMLEtBQUt2SCxNQUFNdkUsRUFBSzZMLEtBQUs3RSxjQUVsQyxPQWRXNEUsRUFBQWpNLFVBQUFvTSxJQUFQLFdBQ0k5TCxLQUFLZ0QsVUFBWWxELEVBQVV5QyxlQUMzQnZDLEtBQUs0TCxLQUFPLElBQUlqRixFQUFTM0csS0FBS3NFLE9BQzlCdEUsS0FBSzZMLEtBQU8sSUFBSVQsRUFDaEJwTCxLQUFLZ0QsVUFBVS9CLFFBQVFqQixLQUFLNEwsTUFDNUI1TCxLQUFLZ0QsVUFBVS9CLFFBQVFqQixLQUFLNkwsTUFDNUI3TCxLQUFLNkwsS0FBSzdILFFBUWxCMkgsRUFuQkEsR0NIQW5KLFNBQVNVLGlCQUFpQixtQkFFMUIsWUFDYyxJQUFJd0ksR0FDWkksUUFKOEMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi92aWV3XCI7XHJcblxyXG5leHBvcnQgdHlwZSBBbmltYXRpb25GdW5jdGlvbiA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVXBkYXRlRnVuY3Rpb24gPSAodGltZURpZmY6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0YWJsZSB7XHJcbiAgICB1cGRhdGU6IFVwZGF0ZUZ1bmN0aW9uO1xyXG4gICAgZHJhdzogQW5pbWF0aW9uRnVuY3Rpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb24ge1xyXG4gICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgYW5pbWF0aW9uczogQW5pbWF0aW9uRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVzOiBVcGRhdGVGdW5jdGlvbltdID0gW107XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUluQm9keSgpOiBBbmltYXRpb24ge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gXCIwXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XHJcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gXCIxMDAlXCJcclxuICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgYW5pbWF0aW9uLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICBhbmltYXRpb24uY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDgwKSB7IC8vIHNwYWNlXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb24ucGxheVBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQua2V5Q29kZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuaW1hdGlvbi5zdGFydEFuaW1hdGlvbigpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5yZXNpemUoKTtcclxuICAgICAgICByZXR1cm4gYW5pbWF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNpemUoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNhbnZhcy5jbGllbnRXaWR0aDtcclxuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0QW5pbWF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgc3RvcEFuaW1hdGlvbigpIHtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHBsYXlQYXVzZSgpIHtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA/IHRoaXMuc3RvcEFuaW1hdGlvbigpIDogdGhpcy5zdGFydEFuaW1hdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChmdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0aW9uID0gKGZ1bmM6IEFuaW1hdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnNwbGljZSh0aGlzLmFuaW1hdGlvbnMuaW5kZXhPZihmdW5jKSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVVcGRhdGUgPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMuc3BsaWNlKHRoaXMudXBkYXRlcy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goYW5pbWF0YWJsZS51cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGFibGUuZHJhdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUFuaW1hdGFibGUgPSAoYW5pbWF0YWJsZTogQW5pbWF0YWJsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoYW5pbWF0YWJsZS51cGRhdGUpLCAxKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGFuaW1hdGFibGUuZHJhdyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRWaWV3ID0gKHZpZXc6IFZpZXcpID0+IHtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUodmlldyk7XHJcbiAgICAgICAgdmlldy53aWR0aCA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdmlldy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlVmlldyA9ICh2aWV3OiBWaWV3KSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbmltYXRhYmxlKHZpZXcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGFzdEZyYW1lVGltZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmcHMgPSA0MDtcclxuICAgIHByaXZhdGUgZnBzSW50ZXJ2YWwgPSAxMDAwIC8gdGhpcy5mcHM7XHJcblxyXG4gICAgcHJpdmF0ZSBhbmltYXRlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lO1xyXG5cclxuICAgICAgICBpZiAoZWxhcHNlZCA+IHRoaXMuZnBzSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gbm93O1xyXG4gICAgICAgICAgICB2YXIgdGltZURpZmYgPSBlbGFwc2VkIC8gMTAwMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHRoaXMudXBkYXRlcykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlKHRpbWVEaWZmKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBhbmltYXRlIG9mIHRoaXMuYW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSh0aGlzLmN0eCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBbmltYXRpb25GdW5jdGlvbiwgVXBkYXRlRnVuY3Rpb24sIEFuaW1hdGFibGUsIEFuaW1hdGlvbiB9IGZyb20gXCIuL2FuaW1hdGlvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXcgaW1wbGVtZW50cyBBbmltYXRhYmxlIHtcclxuICAgIHB1YmxpYyBhbmltYXRpb25zOiBBbmltYXRpb25GdW5jdGlvbltdID0gW107XHJcbiAgICBwdWJsaWMgdXBkYXRlczogVXBkYXRlRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBpc1Zpc2libGUgPSB0cnVlO1xyXG5cclxuICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyO1xyXG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUgPSAodGltZURpZmY6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB0aGlzLnVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSh0aW1lRGlmZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFuaW1hdGUgb2YgdGhpcy5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlKGN0eCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3cgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbiA9IChmdW5jOiBBbmltYXRpb25GdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVXBkYXRlID0gKGZ1bmM6IFVwZGF0ZUZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goZnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoZnVuYyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRhYmxlID0gKGFuaW1hdGFibGU6IEFuaW1hdGFibGUpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMucHVzaChhbmltYXRhYmxlLnVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2goYW5pbWF0YWJsZS5kcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnNwbGljZSh0aGlzLnVwZGF0ZXMuaW5kZXhPZihhbmltYXRhYmxlLnVwZGF0ZSksIDEpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zcGxpY2UodGhpcy5hbmltYXRpb25zLmluZGV4T2YoYW5pbWF0YWJsZS5kcmF3KSwgMSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBbmltYXRhYmxlIH0gZnJvbSBcIi4vZW5jL2FuaW1hdGlvblwiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIi4vZW5jL2NvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZW51QmxhZGUgaW1wbGVtZW50cyBBbmltYXRhYmxlIHtcclxuICAgIHByaXZhdGUgYW5nbGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaXNTaG93biA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBpc0FkZGVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGFkZFRpbWVyOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGFkZFRpbWVyU2Vjb25kcyA9IDEuNTtcclxuICAgIHByaXZhdGUgcmVtb3ZlVGltZXJTZWNvbmRzID0gMi41O1xyXG4gICAgcHVibGljIHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlbWVtYmVyZWRYID0gMDtcclxuICAgIHByaXZhdGUgcmVtZW1iZXJlZFkgPSAwO1xyXG5cclxuICAgIHB1YmxpYyBsb2NhdGlvbiA9IDA7XHJcblxyXG4gICAgcHVibGljIGNvbG9yOiBzdHJpbmc7XHJcblxyXG4gICAgcHVibGljIGdldCBjb250cm9sbGVyTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgY29udHJvbGxlcjogQ29udHJvbGxlciwgcHJpdmF0ZSBvblNob3c6IChibGFkZTogTWVudUJsYWRlKSA9PiB2b2lkLCBwcml2YXRlIG9uQWRkOiAoYmxhZGU6IE1lbnVCbGFkZSkgPT4gdm9pZCwgcHJpdmF0ZSBvblJlbW92ZTogKGJsYWRlOiBNZW51QmxhZGUpID0+IHZvaWQsIHByaXZhdGUgc3RhcnQ6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmNvbG9yID0gXCJibGFja1wiO1xyXG4gICAgICAgIHRoaXMueCA9IDA7XHJcbiAgICAgICAgdGhpcy55ID0gMDtcclxuICAgICAgICB0aGlzLmFuZ2xlID0gMDtcclxuICAgICAgICB0aGlzLmFkZFRpbWVyID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWRkZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgPSB0aGlzLmFuZ2xlICsgTWF0aC5QSSAvIDk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuZ2xlID0gdGhpcy5hbmdsZSAlIChNYXRoLlBJICogMik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSB0aGlzLnJlbWVtYmVyZWRYICsgdGhpcy5jb250cm9sbGVyLnhBeGVzICogMjU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSB0aGlzLnJlbWVtYmVyZWRZICsgdGhpcy5jb250cm9sbGVyLnlBeGVzICogMjU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci55QXhlcyA+IDAuMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVGltZXIgKz0gdGhpcy5jb250cm9sbGVyLnlBeGVzICogdGltZURpZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRkVGltZXIgPj0gdGhpcy5yZW1vdmVUaW1lclNlY29uZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUaW1lciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWRkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlbW92ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29udHJvbGxlci55QXhlcyA8IDAuMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVGltZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIuc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIueUF4ZXMgPCAtMC4zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUaW1lciAtPSB0aGlzLmNvbnRyb2xsZXIueUF4ZXMgKiB0aW1lRGlmZjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRkVGltZXIgPj0gdGhpcy5hZGRUaW1lclNlY29uZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFkZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FkZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUaW1lciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnRyb2xsZXIueUF4ZXMgPiAtMC4xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUaW1lciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlbW92ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIueUF4ZXMgPCAtMC4zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hvdyh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93biA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRpbWVyIC09IHRoaXMuY29udHJvbGxlci55QXhlcyAqIHRpbWVEaWZmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGRyYXcgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5sb2NhdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5sb2NhdGlvbik7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIGxldCBzdGFydFggPSAwO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnRZID0gMDtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBcInJlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9IHdpZHRoIC8gMztcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSAoaGVpZ2h0IC0gMTAwKSAvIDMgKyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBcImdyZWVuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gd2lkdGggLyAzICogMjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSAoaGVpZ2h0IC0gMTAwKSAvIDMgKyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBcImJsdWVcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB3aWR0aCAvIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRZID0gKGhlaWdodCAtIDEwMCkgLyAzICogMiArIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwib3JhbmdlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gd2lkdGggLyAzICogMjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSAoaGVpZ2h0IC0gMTAwKSAvIDMgKiAyICsgMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgdGhpcy54ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSBzdGFydFk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtZW1iZXJlZFggPSBzdGFydFg7XHJcbiAgICAgICAgICAgIHRoaXMucmVtZW1iZXJlZFkgPSBzdGFydFk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBZGRlZCkge1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHgucm90YXRlKHRoaXMuYW5nbGUpO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoLTI1LCAtMjUsIDUwLCA1MCk7XHJcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duICYmICF0aGlzLmlzQWRkZWQpIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC0yNSwgMzUsIDUwIC8gdGhpcy5hZGRUaW1lclNlY29uZHMgKiB0aGlzLmFkZFRpbWVyLCAxMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMuaXNBZGRlZCAmJiB0aGlzLmFkZFRpbWVyID4gMCkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoLTI1LCAzNSwgNTAgLSA1MCAvIHRoaXMucmVtb3ZlVGltZXJTZWNvbmRzICogdGhpcy5hZGRUaW1lciwgMTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmRDb250cm9scyBpbXBsZW1lbnRzIENvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIHhBeGVzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeUF4ZXM6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgc3RhcnQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgbGVmdEtleTogbnVtYmVyLCB1cEtleTogbnVtYmVyLCByaWdodEtleTogbnVtYmVyLCBkb3duS2V5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnhBeGVzID0gMDtcclxuICAgICAgICB0aGlzLnlBeGVzID0gMDtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gbGVmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54QXhlcyA9IC0xXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gdXBLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSByaWdodEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54QXhlcyA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gZG93bktleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGxlZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnhBeGVzID0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSB1cEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueUF4ZXMgPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHJpZ2h0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy54QXhlcyA9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBkb3duS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy55QXhlcyA9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnlBeGVzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVwYWRDb250cm9scyBpbXBsZW1lbnRzIENvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIGdldCB4QXhlcygpOiBudW1iZXIge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5heGVzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgeUF4ZXMoKTogbnVtYmVyIHtcclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcclxuICAgICAgICB2YXIgZ3AgPSBnYW1lcGFkc1t0aGlzLmluZGV4XTtcclxuICAgICAgICByZXR1cm4gZ3AuYXhlc1sxXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHN0YXJ0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5idXR0b25zWzldLnByZXNzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHJpdmF0ZSBpbmRleDogbnVtYmVyKSB7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIi4vZW5jL3ZpZXdcIjtcclxuaW1wb3J0IHsgTWVudUJsYWRlIH0gZnJvbSBcIi4vbWVudUJsYWRlXCI7XHJcbmltcG9ydCB7IEtleWJvYXJkQ29udHJvbHMgfSBmcm9tIFwiLi9lbmMva2V5Ym9hcmRDb250cm9sc1wiO1xyXG5pbXBvcnQgeyBHYW1lcGFkQ29udHJvbHMgfSBmcm9tIFwiLi9lbmMvZ2FtZXBhZENvbnRyb2xzXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9lbmMvY29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lbnVWaWV3IGV4dGVuZHMgVmlldyB7XHJcbiAgICBwcml2YXRlIG1lbnVCbGFkZXM6IE1lbnVCbGFkZVtdID0gW107XHJcbiAgICBwdWJsaWMgY29udHJvbGxlcnM6IENvbnRyb2xsZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBnYW1lcGFkczogeyBbaWQ6IHN0cmluZ106IEdhbWVwYWQgfSA9IHt9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RhcnQ6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHZhciBoYXZlRXZlbnRzID0gJ29uZ2FtZXBhZGNvbm5lY3RlZCcgaW4gd2luZG93O1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uKChjdHgsIHdpZHRoLCBoZWlnaHQpID0+IHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIGN0eC5mb250ID0gXCIyMnB4IHNhbnMtc2VyaWZcIjtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KFwiWW91IGNhbiBjb250cm9sIGEgYmxhZGUgd2l0aCBhIGdhbWVwYWQsIHRoZSBhcnJvdyBrZXlzIG9yIFdBU0QuXCIsIHdpZHRoIC8gMiwgNTApO1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoXCJQcmVzcyB1cCB0byBqb2luIGFuZCBkb3duIHRvIGxlYXZlLlwiLCB3aWR0aCAvIDIsIDgwKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KFwiUHJlc3MgZW50ZXIgb24ga2V5Ym9hcmQgb3Igc3RhcnQgb24gYSBjb250cm9sbGVyIHRvIHN0YXJ0LlwiLCB3aWR0aCAvIDIsIDExMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGJsYWRlMSA9IG5ldyBNZW51QmxhZGUobmV3IEtleWJvYXJkQ29udHJvbHMoXCJhcnJvd3NcIiwgMzcsIDM4LCAzOSwgNDApLCB0aGlzLnNob3dNZW51QmxhZGUsIHRoaXMuYWRkQ29udHJvbGxlciwgdGhpcy5yZW1vdmVDb250cm9sbGVyQW5kTWVudUJsYWRlLCBzdGFydCk7XHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRhYmxlKGJsYWRlMSk7XHJcbiAgICAgICAgdmFyIGJsYWRlMiA9IG5ldyBNZW51QmxhZGUobmV3IEtleWJvYXJkQ29udHJvbHMoXCJ3YXNkXCIsIDY1LCA4NywgNjgsIDgzKSwgdGhpcy5zaG93TWVudUJsYWRlLCB0aGlzLmFkZENvbnRyb2xsZXIsIHRoaXMucmVtb3ZlQ29udHJvbGxlckFuZE1lbnVCbGFkZSwgc3RhcnQpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0YWJsZShibGFkZTIpO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWVwYWRjb25uZWN0ZWRcIiwgdGhpcy5jb25uZWN0aGFuZGxlcik7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkZGlzY29ubmVjdGVkXCIsIHRoaXMuZGlzY29ubmVjdGhhbmRsZXIpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcImhhdmVFdmVudHM6IFwiICsgaGF2ZUV2ZW50cyk7XHJcblxyXG4gICAgICAgIGlmICghaGF2ZUV2ZW50cykge1xyXG4gICAgICAgICAgICBzZXRJbnRlcnZhbCh0aGlzLnNjYW5nYW1lcGFkcywgNTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93TWVudUJsYWRlID0gKG1lbnVCbGFkZTogTWVudUJsYWRlKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cobWVudUJsYWRlLmNvbnRyb2xsZXJOYW1lKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVudUJsYWRlcy5sZW5ndGggPD0gNCkge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVCbGFkZXMucHVzaChtZW51QmxhZGUpO1xyXG4gICAgICAgICAgICBtZW51QmxhZGUubG9jYXRpb24gPSB0aGlzLm1lbnVCbGFkZXMubGVuZ3RoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU29ycnksIG9ubHkgNCBjb250cm9sbGVycyBzdXBwb3J0ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkQ29udHJvbGxlciA9IChtZW51QmxhZGU6IE1lbnVCbGFkZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMucHVzaChtZW51QmxhZGUuY29udHJvbGxlcilcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFkZGVkIGNvbnRyb2xsZXIgXCIgKyBtZW51QmxhZGUuY29udHJvbGxlck5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlQ29udHJvbGxlckFuZE1lbnVCbGFkZSA9IChtZW51QmxhZGU6IE1lbnVCbGFkZSkgPT4ge1xyXG4gICAgICAgIHRoaXMubWVudUJsYWRlcy5zcGxpY2UodGhpcy5tZW51QmxhZGVzLmluZGV4T2YobWVudUJsYWRlKSwgMSk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVycy5zcGxpY2UodGhpcy5jb250cm9sbGVycy5pbmRleE9mKG1lbnVCbGFkZS5jb250cm9sbGVyKSwgMSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVtb3ZlZCBjb250cm9sbGVyIFwiICsgbWVudUJsYWRlLmNvbnRyb2xsZXJOYW1lKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudUJsYWRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51QmxhZGUgPSB0aGlzLm1lbnVCbGFkZXNbaV07XHJcbiAgICAgICAgICAgIG1lbnVCbGFkZS5sb2NhdGlvbiA9IGkgKyAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25uZWN0aGFuZGxlciA9IChlOiBHYW1lcGFkRXZlbnQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImdhbWVwYWQgY29ubmVjdGVkOiBcIiArIGUuZ2FtZXBhZC5pbmRleCArIFwiL1wiICsgZS5nYW1lcGFkLmlkKTtcclxuICAgICAgICB0aGlzLmFkZGdhbWVwYWQoZS5nYW1lcGFkKTtcclxuICAgIH1cclxuXHJcbiAgICBzY2FuZ2FtZXBhZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzY2FuZ2FtZXBhZHNcIik7XHJcblxyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcyA/IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpIDogW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnYW1lcGFkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZXBhZHNbaV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2Nhbm5lZCBnYW1lcGFkOiBcIiArIGdhbWVwYWRzW2ldLmluZGV4ICsgXCIvXCIgKyBnYW1lcGFkc1tpXS5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZXBhZHNbaV0uaW5kZXggaW4gdGhpcy5nYW1lcGFkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZHNbZ2FtZXBhZHNbaV0uaW5kZXhdID0gZ2FtZXBhZHNbaV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZ2FtZXBhZChnYW1lcGFkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdGhhbmRsZXIgPSAoZTogR2FtZXBhZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJnYW1lcGFkIGRpc2Nvbm5lY3RlZDogXCIgKyBlLmdhbWVwYWQuaW5kZXggKyBcIi9cIiArIGUuZ2FtZXBhZC5pZCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVnYW1lcGFkKGUuZ2FtZXBhZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlZ2FtZXBhZCA9IChnYW1lcGFkOiBHYW1lcGFkKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJyZW1vdmluZyBnYW1lcGFkOiBcIiArIGdhbWVwYWQuaW5kZXggKyBcIi9cIiArIGdhbWVwYWQuaWQpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmdhbWVwYWRzW2dhbWVwYWQuaW5kZXhdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51QmxhZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnVCbGFkZSA9IHRoaXMubWVudUJsYWRlc1tpXTtcclxuICAgICAgICAgICAgaWYgKG1lbnVCbGFkZS5jb250cm9sbGVyTmFtZSA9PSBnYW1lcGFkLmluZGV4LnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVudUJsYWRlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRnYW1lcGFkID0gKGdhbWVwYWQ6IEdhbWVwYWQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFkZGluZyBnYW1lcGFkOiBcIiArIGdhbWVwYWQuaW5kZXggKyBcIi9cIiArIGdhbWVwYWQuaWQpO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVwYWRzW2dhbWVwYWQuaW5kZXhdID0gZ2FtZXBhZDtcclxuICAgICAgICB2YXIgYmxhZGUgPSBuZXcgTWVudUJsYWRlKG5ldyBHYW1lcGFkQ29udHJvbHMoZ2FtZXBhZC5pbmRleC50b1N0cmluZygpLCBnYW1lcGFkLmluZGV4KSwgdGhpcy5zaG93TWVudUJsYWRlLCB0aGlzLmFkZENvbnRyb2xsZXIsIHRoaXMucmVtb3ZlQ29udHJvbGxlckFuZE1lbnVCbGFkZSwgdGhpcy5zdGFydCk7XHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRhYmxlKGJsYWRlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEFuaW1hdGFibGUgfSBmcm9tIFwiLi9lbmMvYW5pbWF0aW9uXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9lbmMvY29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJsYWRlIGltcGxlbWVudHMgQW5pbWF0YWJsZSB7XHJcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICAgcHVibGljIHk6IG51bWJlcjtcclxuICAgIHB1YmxpYyBibGFkZU51bWJlcjogbnVtYmVyO1xyXG4gICAgcHVibGljIHZ4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdnk6IG51bWJlcjtcclxuICAgIHB1YmxpYyByOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN0YXJ0Um90YXRpb25zOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJvdGF0aW9uczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBhbmdsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIG06IG51bWJlcjtcclxuICAgIHByaXZhdGUgZjogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBBOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGN3OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHA6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIpIHtcclxuICAgICAgICB0aGlzLnggPSAwO1xyXG4gICAgICAgIHRoaXMueSA9IDA7XHJcbiAgICAgICAgdGhpcy52eCA9IDA7XHJcbiAgICAgICAgdGhpcy52eSA9IDA7XHJcbiAgICAgICAgdGhpcy5hbmdsZSA9IDA7XHJcbiAgICAgICAgdGhpcy5tID0gMC4xO1xyXG4gICAgICAgIHRoaXMuZiA9IDQ2MztcclxuICAgICAgICB0aGlzLnIgPSAyNTtcclxuICAgICAgICB0aGlzLnN0YXJ0Um90YXRpb25zID0gMjEyNDtcclxuICAgICAgICB0aGlzLnJvdGF0aW9ucyA9IHRoaXMuc3RhcnRSb3RhdGlvbnM7XHJcblxyXG4gICAgICAgIHRoaXMuQSA9IDAuMDE7XHJcbiAgICAgICAgdGhpcy5jdyA9IDAuMDU7XHJcbiAgICAgICAgdGhpcy5wID0gMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29sbGlzaW9uKCkge1xyXG4gICAgICAgIHZhciBkYW1hZ2UgPSAyNCArICh0aGlzLnZ4ICogdGhpcy52eCArIHRoaXMudnkgKiB0aGlzLnZ5KSAvIDE0OTI7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbnMgLT0gZGFtYWdlO1xyXG4gICAgICAgIGlmICh0aGlzLnJvdGF0aW9ucyA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbnMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5yb3RhdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciByb3RhdGUgPSB0aGlzLnJvdGF0aW9ucyAvIDEwMDAgKiB0aW1lRGlmZiAqIE1hdGguUEkgKiAyXHJcbiAgICAgICAgICAgIHRoaXMuYW5nbGUgPSB0aGlzLmFuZ2xlICsgcm90YXRlO1xyXG4gICAgICAgICAgICB0aGlzLmFuZ2xlID0gdGhpcy5hbmdsZSAlIChNYXRoLlBJICogMik7XHJcblxyXG4gICAgICAgICAgICB2YXIgZkZyaWN0aW9uWCA9IDAuNSAqIHRoaXMuQSAqIHRoaXMuY3cgKiB0aGlzLnAgKiB0aGlzLnZ4ICogTWF0aC5hYnModGhpcy52eCk7XHJcbiAgICAgICAgICAgIHZhciBmRnJpY3Rpb25ZID0gMC41ICogdGhpcy5BICogdGhpcy5jdyAqIHRoaXMucCAqIHRoaXMudnkgKiBNYXRoLmFicyh0aGlzLnZ5KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBheCA9IHRoaXMuZiAqIHRoaXMuY29udHJvbGxlci54QXhlcyAtIGZGcmljdGlvblggLyB0aGlzLm07XHJcbiAgICAgICAgICAgIHZhciBheSA9IHRoaXMuZiAqIHRoaXMuY29udHJvbGxlci55QXhlcyAtIGZGcmljdGlvblkgLyB0aGlzLm07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZ4ICs9IGF4ICogdGltZURpZmY7XHJcbiAgICAgICAgICAgIHRoaXMudnkgKz0gYXkgKiB0aW1lRGlmZjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMueCArPSB0aGlzLnZ4ICogdGltZURpZmY7XHJcbiAgICAgICAgICAgIHRoaXMueSArPSB0aGlzLnZ5ICogdGltZURpZmY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3aWR0aD86IG51bWJlciwgaGVpZ2h0PzogbnVtYmVyKSA9PiB7XHJcblxyXG4gICAgICAgIHZhciBsaWZlID0gdGhpcy5yb3RhdGlvbnMgLyB0aGlzLnN0YXJ0Um90YXRpb25zICogd2lkdGggLyA0O1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5ibGFkZU51bWJlcikge1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJyZWRcIjtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBsaWZlLCAzMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiZ3JlZW5cIjtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh3aWR0aCwgMCwgLWxpZmUsIDMwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJibHVlXCI7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgaGVpZ2h0LCBsaWZlLCAtMzApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIm9yYW5nZVwiO1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHdpZHRoLCBoZWlnaHQsIC1saWZlLCAtMzApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG5cclxuICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICBjdHgucm90YXRlKHRoaXMuYW5nbGUpO1xyXG4gICAgICAgIHZhciBjdWJlU2l6ZSA9IE1hdGguc3FydCh0aGlzLnIgKiB0aGlzLnIgLyAyKVxyXG4gICAgICAgIGN0eC5maWxsUmVjdCgtY3ViZVNpemUsIC1jdWJlU2l6ZSwgY3ViZVNpemUgKiAyLCBjdWJlU2l6ZSAqIDIpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBbmltYXRhYmxlIH0gZnJvbSBcIi4vZW5jL2FuaW1hdGlvblwiO1xyXG5pbXBvcnQgeyBCbGFkZSB9IGZyb20gXCIuL2JsYWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29sbGlkZXIgaW1wbGVtZW50cyBBbmltYXRhYmxlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJsYWRlczogQmxhZGVbXSwgcHJpdmF0ZSBib3JkZXJSaWdodDogbnVtYmVyLCBwcml2YXRlIGJvcmRlckJvdHRvbTogbnVtYmVyKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSA9ICh0aW1lRGlmZjogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJsYWRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBibGFkZSA9IHRoaXMuYmxhZGVzW2ldO1xyXG4gICAgICAgICAgICB0aGlzLndhbGxDb2xsaXNpb24oYmxhZGUpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmJsYWRlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPD0gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxhZGUyID0gdGhpcy5ibGFkZXNbal07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2VYID0gYmxhZGUyLnggLSBibGFkZS54O1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlWSA9IGJsYWRlMi55IC0gYmxhZGUueTtcclxuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkaXN0YW5jZVggKiBkaXN0YW5jZVggKyBkaXN0YW5jZVkgKiBkaXN0YW5jZVkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8PSBibGFkZS5yICogMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY29sbGlzaW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25Db3JyZWN0aW9uKGRpc3RhbmNlLCBibGFkZSwgZGlzdGFuY2VYLCBkaXN0YW5jZVksIGJsYWRlMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25WMihkaXN0YW5jZVksIGRpc3RhbmNlWCwgYmxhZGUsIGJsYWRlMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHdhbGxDb2xsaXNpb24oYmxhZGU6IEJsYWRlKSB7XHJcbiAgICAgICAgaWYgKGJsYWRlLnggLSBibGFkZS5yIDwgMCkge1xyXG4gICAgICAgICAgICBibGFkZS52eCA9IC1ibGFkZS52eDtcclxuICAgICAgICAgICAgYmxhZGUueCA9IGJsYWRlLnIgLSBibGFkZS54ICsgYmxhZGUucjtcclxuICAgICAgICAgICAgYmxhZGUuY29sbGlzaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGJsYWRlLnggKyBibGFkZS5yID4gdGhpcy5ib3JkZXJSaWdodCkge1xyXG4gICAgICAgICAgICBibGFkZS52eCA9IC1ibGFkZS52eDtcclxuICAgICAgICAgICAgYmxhZGUueCA9IHRoaXMuYm9yZGVyUmlnaHQgLSAoYmxhZGUueCArIGJsYWRlLnIgLSB0aGlzLmJvcmRlclJpZ2h0KSAtIGJsYWRlLnI7XHJcbiAgICAgICAgICAgIGJsYWRlLmNvbGxpc2lvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYmxhZGUueSAtIGJsYWRlLnIgPCAwKSB7XHJcbiAgICAgICAgICAgIGJsYWRlLnZ5ID0gLWJsYWRlLnZ5O1xyXG4gICAgICAgICAgICBibGFkZS55ID0gYmxhZGUuciAtIGJsYWRlLnkgKyBibGFkZS5yO1xyXG4gICAgICAgICAgICBibGFkZS5jb2xsaXNpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYmxhZGUueSArIGJsYWRlLnIgPiB0aGlzLmJvcmRlckJvdHRvbSkge1xyXG4gICAgICAgICAgICBibGFkZS52eSA9IC1ibGFkZS52eTtcclxuICAgICAgICAgICAgYmxhZGUueSA9IHRoaXMuYm9yZGVyQm90dG9tIC0gKGJsYWRlLnkgKyBibGFkZS5yIC0gdGhpcy5ib3JkZXJCb3R0b20pIC0gYmxhZGUucjtcclxuICAgICAgICAgICAgYmxhZGUuY29sbGlzaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uVjIoZGlzdGFuY2VZOiBudW1iZXIsIGRpc3RhbmNlWDogbnVtYmVyLCBibGFkZTE6IEJsYWRlLCBibGFkZTI6IEJsYWRlKSB7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGRpc3RhbmNlWCAqIGRpc3RhbmNlWCArIGRpc3RhbmNlWSAqIGRpc3RhbmNlWSk7XHJcbiAgICAgICAgdmFyIHAxeCA9IGJsYWRlMS52eCAqIDIgKiBibGFkZTEubTtcclxuICAgICAgICB2YXIgcDF5ID0gYmxhZGUxLnZ5ICogMiAqIGJsYWRlMS5tO1xyXG4gICAgICAgIHZhciBwMSA9IE1hdGguc3FydChwMXggKiBwMXggKyBwMXkgKiBwMXkpO1xyXG4gICAgICAgIHZhciBwMXhBbmdsZWQgPSBkaXN0YW5jZVggLyBkaXN0YW5jZSAqIHAxO1xyXG4gICAgICAgIHZhciBwMXlBbmdsZWQgPSBkaXN0YW5jZVkgLyBkaXN0YW5jZSAqIHAxO1xyXG5cclxuICAgICAgICB2YXIgcDJ4ID0gYmxhZGUyLnZ4ICogMyAqIGJsYWRlMi5tO1xyXG4gICAgICAgIHZhciBwMnkgPSBibGFkZTIudnkgKiAzICogYmxhZGUyLm07XHJcbiAgICAgICAgdmFyIHAyID0gTWF0aC5zcXJ0KHAyeCAqIHAyeCArIHAyeSAqIHAyeSk7XHJcbiAgICAgICAgdmFyIHAyeEFuZ2xlZCA9IC1kaXN0YW5jZVggLyBkaXN0YW5jZSAqIHAyO1xyXG4gICAgICAgIHZhciBwMnlBbmdsZWQgPSAtZGlzdGFuY2VZIC8gZGlzdGFuY2UgKiBwMjtcclxuICAgICAgICBibGFkZTIudnggKz0gcDF4QW5nbGVkIC8gYmxhZGUyLm07XHJcbiAgICAgICAgYmxhZGUyLnZ5ICs9IHAxeUFuZ2xlZCAvIGJsYWRlMi5tO1xyXG4gICAgICAgIGJsYWRlMS52eCArPSBwMnhBbmdsZWQgLyBibGFkZTEubTtcclxuICAgICAgICBibGFkZTEudnkgKz0gcDJ5QW5nbGVkIC8gYmxhZGUxLm07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwb3NpdGlvbkNvcnJlY3Rpb24oZGlzdGFuY2U6IG51bWJlciwgYmxhZGU6IEJsYWRlLCBkaXN0YW5jZVg6IG51bWJlciwgZGlzdGFuY2VZOiBudW1iZXIsIGJsYWRlMjogQmxhZGUpIHtcclxuICAgICAgICB2YXIgY29ycmVjdGlvbiA9IChkaXN0YW5jZSAtIGJsYWRlLnIgKiAyKSAvIDI7XHJcbiAgICAgICAgdmFyIGNvcnJlY3Rpb25GYWN0b3IgPSBjb3JyZWN0aW9uIC8gZGlzdGFuY2U7XHJcbiAgICAgICAgdmFyIGNvcnJlY3Rpb254ID0gY29ycmVjdGlvbkZhY3RvciAqIGRpc3RhbmNlWDtcclxuICAgICAgICB2YXIgY29ycmVjdGlvbnkgPSBjb3JyZWN0aW9uRmFjdG9yICogZGlzdGFuY2VZO1xyXG4gICAgICAgIGJsYWRlLnggKz0gY29ycmVjdGlvbng7XHJcbiAgICAgICAgYmxhZGUueSArPSBjb3JyZWN0aW9ueTtcclxuICAgICAgICBibGFkZTIueCAtPSBjb3JyZWN0aW9ueDtcclxuICAgICAgICBibGFkZTIueSAtPSBjb3JyZWN0aW9ueTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9lbmMvY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIi4vZW5jL3ZpZXdcIjtcclxuaW1wb3J0IHsgQmxhZGUgfSBmcm9tIFwiLi9ibGFkZVwiO1xyXG5pbXBvcnQgeyBDb2xsaWRlciB9IGZyb20gXCIuL2NvbGxpZGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVZpZXcgZXh0ZW5kcyBWaWV3IHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXJ0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGJsYWRlczogQmxhZGVbXSA9IFtdO1xyXG4gICAgcHVibGljIHN0YXJ0KGNvbnRyb2xsZXJzOiBDb250cm9sbGVyW10pIHtcclxuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coY29udHJvbGxlcnMpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRyb2xsZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBjb250cm9sbGVyc1tpXTtcclxuICAgICAgICAgICAgdmFyIGJsYWRlID0gbmV3IEJsYWRlKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnRYID0gMDtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0WSA9IDA7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaSArIDEpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB0aGlzLndpZHRoIC8gMztcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSB0aGlzLmhlaWdodCAvIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gdGhpcy53aWR0aCAvIDMgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WSA9IHRoaXMuaGVpZ2h0IC8gMztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB0aGlzLndpZHRoIC8gMztcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSB0aGlzLmhlaWdodCAvIDMgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9IHRoaXMud2lkdGggLyAzICogMjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSB0aGlzLmhlaWdodCAvIDMgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJsYWRlLmJsYWRlTnVtYmVyID0gaSArIDE7XHJcbiAgICAgICAgICAgIGJsYWRlLnggPSBzdGFydFg7XHJcbiAgICAgICAgICAgIGJsYWRlLnkgPSBzdGFydFk7XHJcbiAgICAgICAgICAgIHRoaXMuYmxhZGVzLnB1c2goYmxhZGUpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUoYmxhZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUobmV3IENvbGxpZGVyKHRoaXMuYmxhZGVzLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQW5pbWF0aW9uIH0gZnJvbSBcIi4vZW5jL2FuaW1hdGlvblwiO1xyXG5pbXBvcnQgeyBNZW51VmlldyB9IGZyb20gXCIuL21lbnVWaWV3XCI7XHJcbmltcG9ydCB7IEdhbWVWaWV3IH0gZnJvbSBcIi4vZ2FtZVZpZXdcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIGFuaW1hdGlvbjogQW5pbWF0aW9uO1xyXG4gICAgbWVudTogTWVudVZpZXc7XHJcbiAgICBnYW1lOiBHYW1lVmlldztcclxuXHJcbiAgICBwdWJsaWMgcnVuKCkge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gQW5pbWF0aW9uLmNyZWF0ZUluQm9keSgpO1xyXG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBNZW51Vmlldyh0aGlzLnN0YXJ0KTtcclxuICAgICAgICB0aGlzLmdhbWUgPSBuZXcgR2FtZVZpZXcoKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5hZGRWaWV3KHRoaXMubWVudSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uYWRkVmlldyh0aGlzLmdhbWUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLm1lbnUuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zaG93KCk7XHJcbiAgICAgICAgdGhpcy5nYW1lLnN0YXJ0KHRoaXMubWVudS5jb250cm9sbGVycyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBtYWluLCBmYWxzZSk7XHJcblxyXG5mdW5jdGlvbiBtYWluKCkge1xyXG4gIGNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuICBhcHAucnVuKCk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9