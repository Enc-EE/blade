!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o=function(){function e(){var e=this;this.animations=[],this.updates=[],this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)},this.addView=function(t){e.addAnimatable(t),t.width=e.width,t.height=e.height},this.removeView=function(t){e.removeAnimatable(t)},this.fps=40,this.fpsInterval=1e3/this.fps,this.animate=function(){requestAnimationFrame(e.animate);var t=Date.now(),n=t-e.lastFrameTime;if(n>e.fpsInterval){e.lastFrameTime=t;for(var o=n/1e3,i=0,a=e.updates;i<a.length;i++){(0,a[i])(o)}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var r=0,s=e.animations;r<s.length;r++){(0,s[r])(e.ctx,e.canvas.width,e.canvas.height)}}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),e.createInBody=function(){document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var t=document.createElement("canvas");document.body.appendChild(t),t.style.width="100%",t.style.height="100%";var n=new e;return n.canvas=t,n.ctx=t.getContext("2d"),n.startAnimation(),n.resize(),n},e.prototype.resize=function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight},e.prototype.startAnimation=function(){this.lastFrameTime=Date.now(),this.animate()},e}(),i=function(){return function(){var e=this;this.animations=[],this.updates=[],this.isVisible=!0,this.update=function(t){if(e.isVisible)for(var n=0,o=e.updates;n<o.length;n++)(0,o[n])(t)},this.draw=function(t,n,o){if(e.isVisible)for(var i=0,a=e.animations;i<a.length;i++)(0,a[i])(t,n,o)},this.show=function(){e.isVisible=!0},this.hide=function(){e.isVisible=!1},this.addAnimation=function(t){e.animations.push(t)},this.removeAnimation=function(t){e.animations.splice(e.animations.indexOf(t),1)},this.addUpdate=function(t){e.updates.push(t)},this.removeUpdate=function(t){e.updates.splice(e.updates.indexOf(t),1)},this.addAnimatable=function(t){e.updates.push(t.update),e.animations.push(t.draw)},this.removeAnimatable=function(t){e.updates.splice(e.updates.indexOf(t.update),1),e.animations.splice(e.animations.indexOf(t.draw),1)}}}(),a=function(){function e(e,t,n,o,i){var a=this;this.controller=e,this.onShow=t,this.onAdd=n,this.onRemove=o,this.start=i,this.isShown=!1,this.isAdded=!1,this.addTimerSeconds=1.5,this.removeTimerSeconds=2.5,this.rememberedX=0,this.rememberedY=0,this.location=0,this.update=function(e){a.isShown?a.isAdded?(a.angle=a.angle+Math.PI/9,a.angle=a.angle%(2*Math.PI),a.x=a.rememberedX+25*a.controller.xAxes,a.y=a.rememberedY+25*a.controller.yAxes,a.controller.yAxes>.3?(a.addTimer+=a.controller.yAxes*e,a.addTimer>=a.removeTimerSeconds&&(a.addTimer=0,a.isShown=!1,a.isAdded=!1,a.onRemove(a))):a.controller.yAxes<.1&&(a.addTimer=0),a.controller.start&&(console.log("start"),a.start())):a.controller.yAxes<-.3?(a.addTimer-=a.controller.yAxes*e,a.addTimer>=a.addTimerSeconds&&(a.onAdd(a),a.isAdded=!0,a.addTimer=0)):a.controller.yAxes>-.1&&(a.addTimer=0,a.isShown=!1,a.onRemove(a)):a.controller.yAxes<-.3&&(a.onShow(a),a.isShown=!0,a.addTimer-=a.controller.yAxes*e)},this.draw=function(e,t,n){if(a.location>0){console.log(a.location);var o="black",i=0,r=0;switch(a.location){case 1:o="red",i=t/3,r=(n-100)/3+100;break;case 2:o="green",i=t/3*2,r=(n-100)/3+100;break;case 3:o="blue",i=t/3,r=(n-100)/3*2+100;break;case 4:o="orange",i=t/3*2,r=(n-100)/3*2+100}a.color=o,a.x=i,a.y=r,a.rememberedX=i,a.rememberedY=r,a.location=0}e.fillStyle=a.color,e.save(),e.translate(a.x,a.y),a.isAdded&&(e.save(),e.rotate(a.angle),e.fillRect(-25,-25,50,50),e.restore()),a.isShown&&!a.isAdded&&e.fillRect(-25,35,50/a.addTimerSeconds*a.addTimer,10),a.isShown&&a.isAdded&&a.addTimer>0&&e.fillRect(-25,35,50-50/a.removeTimerSeconds*a.addTimer,10),e.restore()},this.color="black",this.x=0,this.y=0,this.angle=0,this.addTimer=0}return Object.defineProperty(e.prototype,"controllerName",{get:function(){return this.controller.name},enumerable:!0,configurable:!0}),e}(),r=function(){return function(e,t,n,o,i){var a=this;this.name=e,this.xAxes=0,this.yAxes=0,this.start=!1,document.addEventListener("keydown",function(e){e.keyCode==t&&(a.xAxes=-1),e.keyCode==n&&(a.yAxes=-1),e.keyCode==o&&(a.xAxes=1),e.keyCode==i&&(a.yAxes=1),13==e.keyCode&&(a.start=!0)}),document.addEventListener("keyup",function(e){e.keyCode==t&&(a.xAxes=-1)&&(a.xAxes=0),e.keyCode==n&&(a.yAxes=-1)&&(a.yAxes=0),e.keyCode==o&&(a.xAxes=1)&&(a.xAxes=0),e.keyCode==i&&(a.yAxes=1)&&(a.yAxes=0),13==e.keyCode&&(a.start=!1)})}}(),s=function(){function e(e,t){this.name=e,this.index=t}return Object.defineProperty(e.prototype,"xAxes",{get:function(){return navigator.getGamepads()[this.index].axes[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxes",{get:function(){return navigator.getGamepads()[this.index].axes[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return navigator.getGamepads()[this.index].buttons[9].pressed},enumerable:!0,configurable:!0}),e}(),d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(e){function t(t){var n=e.call(this)||this;n.start=t,n.menuBlades=[],n.controllers=[],n.gamepads={},n.showMenuBlade=function(e){console.log(e.controllerName),n.menuBlades.length<=4?(n.menuBlades.push(e),e.location=n.menuBlades.length):console.log("Sorry, only 4 controllers supported")},n.addController=function(e){n.controllers.push(e.controller),console.log("added controller "+e.controllerName)},n.removeControllerAndMenuBlade=function(e){n.menuBlades.splice(n.menuBlades.indexOf(e),1),n.controllers.splice(n.controllers.indexOf(e.controller),1),console.log("removed controller "+e.controllerName);for(var t=0;t<n.menuBlades.length;t++){n.menuBlades[t].location=t+1}},n.connecthandler=function(e){console.log("gamepad connected: "+e.gamepad.index+"/"+e.gamepad.id),n.addgamepad(e.gamepad)},n.scangamepads=function(){console.log("scangamepads");for(var e=navigator.getGamepads?navigator.getGamepads():[],t=0;t<e.length;t++)e[t]&&(console.log("scanned gamepad: "+e[t].index+"/"+e[t].id),e[t].index in n.gamepads?n.gamepads[e[t].index]=e[t]:n.addgamepad(e[t]))},n.disconnecthandler=function(e){console.log("gamepad disconnected: "+e.gamepad.index+"/"+e.gamepad.id),n.removegamepad(e.gamepad)},n.removegamepad=function(e){console.log("removing gamepad: "+e.index+"/"+e.id),delete n.gamepads[e.index];for(var t=0;t<n.menuBlades.length;t++){if(n.menuBlades[t].controllerName==e.index.toString()){n.menuBlades.splice(t,1);break}}},n.addgamepad=function(e){console.log("adding gamepad: "+e.index+"/"+e.id),n.gamepads[e.index]=e;var t=new a(new s(e.index.toString(),e.index),n.showMenuBlade,n.addController,n.removeControllerAndMenuBlade,n.start);n.addAnimatable(t)};var o="ongamepadconnected"in window;n.addAnimation(function(e,t,n){e.fillStyle="black",e.textAlign="center",e.font="22px sans-serif",e.fillText("You can control a blade with a gamepad, the arrow keys or WASD.",t/2,50),e.fillText("Press up to join and down to leave.",t/2,80),e.fillText("Press enter on keyboard or start on a controller to start.",t/2,110)});var i=new a(new r("arrows",37,38,39,40),n.showMenuBlade,n.addController,n.removeControllerAndMenuBlade,t);n.addAnimatable(i);var d=new a(new r("wasd",65,87,68,83),n.showMenuBlade,n.addController,n.removeControllerAndMenuBlade,t);return n.addAnimatable(d),window.addEventListener("gamepadconnected",n.connecthandler),window.addEventListener("gamepaddisconnected",n.disconnecthandler),console.log("haveEvents: "+o),o||setInterval(n.scangamepads,500),n}return d(t,e),t}(i),c=function(){return function(e){var t=this;this.controller=e,this.update=function(e){t.angle=t.angle+Math.PI/9,t.angle=t.angle%(2*Math.PI);var n=.5*t.A*t.cw*t.p*t.vx*Math.abs(t.vx),o=.5*t.A*t.cw*t.p*t.vy*Math.abs(t.vy),i=t.f*t.controller.xAxes-n/t.m,a=t.f*t.controller.yAxes-o/t.m;t.vx+=i*e,t.vy+=a*e,t.x+=t.vx*e,t.y+=t.vy*e},this.draw=function(e,n,o){e.fillStyle=t.color,e.save(),e.translate(t.x,t.y),e.rotate(t.angle),e.fillRect(-25,-25,50,50),e.restore()},this.x=0,this.y=0,this.color="black",this.vx=0,this.vy=0,this.angle=0,this.m=.1,this.f=463,this.A=.01,this.cw=.05,this.p=1}}(),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.start=function(e){for(var t=0;t<e.length;t++){var n=e[t],o=new c(n),i="black",a=0,r=0;switch(t+1){case 1:i="red",a=this.width/3,r=this.height/3;break;case 2:i="green",a=this.width/3*2,r=this.height/3;break;case 3:i="blue",a=this.width/3,r=this.height/3*2;break;case 4:i="orange",a=this.width/3*2,r=this.height/3*2}o.color=i,o.x=a,o.y=r,this.addAnimatable(o)}},t}(i),m=function(){function e(){var e=this;this.start=function(){e.menu.hide(),e.game.show(),e.game.start(e.menu.controllers)}}return e.prototype.run=function(){this.animation=o.createInBody(),this.menu=new l(this.start),this.game=new h,this.animation.addView(this.menu),this.animation.addView(this.game),this.game.hide()},e}();document.addEventListener("DOMContentLoaded",function(){(new m).run()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVudUJsYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9rZXlib2FyZENvbnRyb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lcGFkQ29udHJvbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21lbnVWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9ibGFkZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZVZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBbmltYXRpb24iLCJfdGhpcyIsInRoaXMiLCJhbmltYXRpb25zIiwidXBkYXRlcyIsImFkZEFuaW1hdGlvbiIsImZ1bmMiLCJwdXNoIiwicmVtb3ZlQW5pbWF0aW9uIiwic3BsaWNlIiwiaW5kZXhPZiIsImFkZFVwZGF0ZSIsInJlbW92ZVVwZGF0ZSIsImFkZEFuaW1hdGFibGUiLCJhbmltYXRhYmxlIiwidXBkYXRlIiwiZHJhdyIsInJlbW92ZUFuaW1hdGFibGUiLCJhZGRWaWV3IiwidmlldyIsIndpZHRoIiwiaGVpZ2h0IiwicmVtb3ZlVmlldyIsImZwcyIsImZwc0ludGVydmFsIiwiYW5pbWF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm5vdyIsIkRhdGUiLCJlbGFwc2VkIiwibGFzdEZyYW1lVGltZSIsInRpbWVEaWZmIiwiX2kiLCJfYSIsImxlbmd0aCIsImN0eCIsImNsZWFyUmVjdCIsImNhbnZhcyIsIl9iIiwiX2MiLCJjcmVhdGVJbkJvZHkiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJvdmVyZmxvdyIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImFuaW1hdGlvbiIsImdldENvbnRleHQiLCJzdGFydEFuaW1hdGlvbiIsInJlc2l6ZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiVmlldyIsImlzVmlzaWJsZSIsInNob3ciLCJoaWRlIiwiTWVudUJsYWRlIiwiY29udHJvbGxlciIsIm9uU2hvdyIsIm9uQWRkIiwib25SZW1vdmUiLCJzdGFydCIsImlzU2hvd24iLCJpc0FkZGVkIiwiYWRkVGltZXJTZWNvbmRzIiwicmVtb3ZlVGltZXJTZWNvbmRzIiwicmVtZW1iZXJlZFgiLCJyZW1lbWJlcmVkWSIsImxvY2F0aW9uIiwiYW5nbGUiLCJNYXRoIiwiUEkiLCJ4IiwieEF4ZXMiLCJ5IiwieUF4ZXMiLCJhZGRUaW1lciIsImNvbnNvbGUiLCJsb2ciLCJjb2xvciIsInN0YXJ0WCIsInN0YXJ0WSIsImZpbGxTdHlsZSIsInNhdmUiLCJ0cmFuc2xhdGUiLCJyb3RhdGUiLCJmaWxsUmVjdCIsInJlc3RvcmUiLCJLZXlib2FyZENvbnRyb2xzIiwibGVmdEtleSIsInVwS2V5IiwicmlnaHRLZXkiLCJkb3duS2V5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Q29kZSIsIkdhbWVwYWRDb250cm9scyIsImluZGV4IiwibmF2aWdhdG9yIiwiZ2V0R2FtZXBhZHMiLCJheGVzIiwiYnV0dG9ucyIsInByZXNzZWQiLCJtZW51Vmlld19NZW51VmlldyIsIl9zdXBlciIsIk1lbnVWaWV3IiwibWVudUJsYWRlcyIsImNvbnRyb2xsZXJzIiwiZ2FtZXBhZHMiLCJzaG93TWVudUJsYWRlIiwibWVudUJsYWRlIiwiY29udHJvbGxlck5hbWUiLCJhZGRDb250cm9sbGVyIiwicmVtb3ZlQ29udHJvbGxlckFuZE1lbnVCbGFkZSIsImNvbm5lY3RoYW5kbGVyIiwiZSIsImdhbWVwYWQiLCJpZCIsImFkZGdhbWVwYWQiLCJzY2FuZ2FtZXBhZHMiLCJkaXNjb25uZWN0aGFuZGxlciIsInJlbW92ZWdhbWVwYWQiLCJ0b1N0cmluZyIsImJsYWRlIiwiaGF2ZUV2ZW50cyIsIndpbmRvdyIsInRleHRBbGlnbiIsImZvbnQiLCJmaWxsVGV4dCIsImJsYWRlMSIsImJsYWRlMiIsInNldEludGVydmFsIiwiX19leHRlbmRzIiwiQmxhZGUiLCJmRnJpY3Rpb25YIiwiQSIsImN3IiwidngiLCJhYnMiLCJmRnJpY3Rpb25ZIiwidnkiLCJheCIsImYiLCJheSIsImdhbWVWaWV3X0dhbWVWaWV3IiwiR2FtZVZpZXciLCJnYW1lVmlld19leHRlbmRzIiwiYXBwX0FwcCIsIkFwcCIsIm1lbnUiLCJnYW1lIiwicnVuIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMs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QVNsRixLQUFLbUIsT0FBUyxFQUN2QixNQUNKLEtBQUssRUFDRDZELEVBQVEsUUFDUkMsRUFBU2pGLEtBQUtrQixNQUFRLEVBQUksRUFDMUJnRSxFQUFTbEYsS0FBS21CLE9BQVMsRUFDdkIsTUFDSixLQUFLLEVBQ0Q2RCxFQUFRLE9BQ1JDLEVBQVNqRixLQUFLa0IsTUFBUSxFQUN0QmdFLEVBQVNsRixLQUFLbUIsT0FBUyxFQUFJLEVBQzNCLE1BQ0osS0FBSyxFQUNENkQsRUFBUSxTQUNSQyxFQUFTakYsS0FBS2tCLE1BQVEsRUFBSSxFQUMxQmdFLEVBQVNsRixLQUFLbUIsT0FBUyxFQUFJLEVBR25DeUcsRUFBTTVDLE1BQVFBLEVBQ2Q0QyxFQUFNbkQsRUFBSVEsRUFDVjJDLEVBQU1qRCxFQUFJTyxFQUNWbEYsS0FBS1csY0FBY2lILEtBRy9Cc0IsRUFwQ0EsQ0FBOEI3RixHQ0M5QitGLEVBQUEsb0JBQUFDLElBQUEsSUFBQXRKLEVBQUFDLEtBY1lBLEtBQUE4RCxNQUFRLFdBQ1ovRCxFQUFLdUosS0FBSzlGLE9BQ1Z6RCxFQUFLd0osS0FBS2hHLE9BQ1Z4RCxFQUFLd0osS0FBS3pGLE1BQU0vRCxFQUFLdUosS0FBSzFDLGNBRWxDLE9BZFd5QyxFQUFBM0osVUFBQThKLElBQVAsV0FDSXhKLEtBQUsrQyxVQUFZakQsRUFBVXdDLGVBQzNCdEMsS0FBS3NKLEtBQU8sSUFBSTlDLEVBQVN4RyxLQUFLOEQsT0FDOUI5RCxLQUFLdUosS0FBTyxJQUFJTixFQUNoQmpKLEtBQUsrQyxVQUFVL0IsUUFBUWhCLEtBQUtzSixNQUM1QnRKLEtBQUsrQyxVQUFVL0IsUUFBUWhCLEtBQUt1SixNQUM1QnZKLEtBQUt1SixLQUFLL0YsUUFRbEI2RixFQW5CQSxHQ0hBOUcsU0FBU3VELGlCQUFpQixtQkFFMUIsWUFDYyxJQUFJc0QsR0FDWkksUUFKOEMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi92aWV3XCI7XHJcblxyXG5leHBvcnQgdHlwZSBBbmltYXRpb25GdW5jdGlvbiA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVXBkYXRlRnVuY3Rpb24gPSAodGltZURpZmY6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0YWJsZSB7XHJcbiAgICB1cGRhdGU6IFVwZGF0ZUZ1bmN0aW9uO1xyXG4gICAgZHJhdzogQW5pbWF0aW9uRnVuY3Rpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb24ge1xyXG4gICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgYW5pbWF0aW9uczogQW5pbWF0aW9uRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVzOiBVcGRhdGVGdW5jdGlvbltdID0gW107XHJcblxyXG5cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVJbkJvZHkoKTogQW5pbWF0aW9uIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG5cclxuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG4gICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXHJcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbigpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5jYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgYW5pbWF0aW9uLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBhbmltYXRpb24uc3RhcnRBbmltYXRpb24oKTtcclxuICAgICAgICBhbmltYXRpb24ucmVzaXplKCk7XHJcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzaXplKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEFuaW1hdGlvbigpIHtcclxuICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChmdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0aW9uID0gKGZ1bmM6IEFuaW1hdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnNwbGljZSh0aGlzLmFuaW1hdGlvbnMuaW5kZXhPZihmdW5jKSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVVcGRhdGUgPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMuc3BsaWNlKHRoaXMudXBkYXRlcy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goYW5pbWF0YWJsZS51cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGFibGUuZHJhdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUFuaW1hdGFibGUgPSAoYW5pbWF0YWJsZTogQW5pbWF0YWJsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoYW5pbWF0YWJsZS51cGRhdGUpLCAxKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGFuaW1hdGFibGUuZHJhdyksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRWaWV3ID0gKHZpZXc6IFZpZXcpID0+IHtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUodmlldyk7XHJcbiAgICAgICAgdmlldy53aWR0aCA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdmlldy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlVmlldyA9ICh2aWV3OiBWaWV3KSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbmltYXRhYmxlKHZpZXcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGFzdEZyYW1lVGltZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmcHMgPSA0MDtcclxuICAgIHByaXZhdGUgZnBzSW50ZXJ2YWwgPSAxMDAwIC8gdGhpcy5mcHM7XHJcblxyXG4gICAgcHJpdmF0ZSBhbmltYXRlID0gKCkgPT4ge1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUpO1xyXG5cclxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIHRoaXMubGFzdEZyYW1lVGltZTtcclxuXHJcbiAgICAgICAgaWYgKGVsYXBzZWQgPiB0aGlzLmZwc0ludGVydmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IG5vdztcclxuICAgICAgICAgICAgdmFyIHRpbWVEaWZmID0gZWxhcHNlZCAvIDEwMDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB0aGlzLnVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSh0aW1lRGlmZik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgYW5pbWF0ZSBvZiB0aGlzLmFuaW1hdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGUodGhpcy5jdHgsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQW5pbWF0aW9uRnVuY3Rpb24sIFVwZGF0ZUZ1bmN0aW9uLCBBbmltYXRhYmxlLCBBbmltYXRpb24gfSBmcm9tIFwiLi9hbmltYXRpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3IGltcGxlbWVudHMgQW5pbWF0YWJsZSB7XHJcbiAgICBwdWJsaWMgYW5pbWF0aW9uczogQW5pbWF0aW9uRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgcHVibGljIHVwZGF0ZXM6IFVwZGF0ZUZ1bmN0aW9uW10gPSBbXTtcclxuICAgIHByaXZhdGUgaXNWaXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdGhpcy51cGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUodGltZURpZmYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGRyYXcgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhbmltYXRlIG9mIHRoaXMuYW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZShjdHgsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGlkZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRpb24gPSAoZnVuYzogQW5pbWF0aW9uRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChmdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQW5pbWF0aW9uID0gKGZ1bmM6IEFuaW1hdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnNwbGljZSh0aGlzLmFuaW1hdGlvbnMuaW5kZXhPZihmdW5jKSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFVwZGF0ZSA9IChmdW5jOiBVcGRhdGVGdW5jdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5wdXNoKGZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVVcGRhdGUgPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZXMuc3BsaWNlKHRoaXMudXBkYXRlcy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQW5pbWF0YWJsZSA9IChhbmltYXRhYmxlOiBBbmltYXRhYmxlKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVzLnB1c2goYW5pbWF0YWJsZS51cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGFibGUuZHJhdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUFuaW1hdGFibGUgPSAoYW5pbWF0YWJsZTogQW5pbWF0YWJsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlcy5zcGxpY2UodGhpcy51cGRhdGVzLmluZGV4T2YoYW5pbWF0YWJsZS51cGRhdGUpLCAxKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKHRoaXMuYW5pbWF0aW9ucy5pbmRleE9mKGFuaW1hdGFibGUuZHJhdyksIDEpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQW5pbWF0YWJsZSB9IGZyb20gXCIuL2FuaW1hdGlvblwiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lbnVCbGFkZSBpbXBsZW1lbnRzIEFuaW1hdGFibGUge1xyXG4gICAgcHJpdmF0ZSBhbmdsZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBpc1Nob3duID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzQWRkZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgYWRkVGltZXI6IG51bWJlcjtcclxuICAgIHByaXZhdGUgYWRkVGltZXJTZWNvbmRzID0gMS41O1xyXG4gICAgcHJpdmF0ZSByZW1vdmVUaW1lclNlY29uZHMgPSAyLjU7XHJcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICAgcHVibGljIHk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVtZW1iZXJlZFggPSAwO1xyXG4gICAgcHJpdmF0ZSByZW1lbWJlcmVkWSA9IDA7XHJcblxyXG4gICAgcHVibGljIGxvY2F0aW9uID0gMDtcclxuXHJcbiAgICBwdWJsaWMgY29sb3I6IHN0cmluZztcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNvbnRyb2xsZXJOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbGxlci5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBjb250cm9sbGVyOiBDb250cm9sbGVyLCBwcml2YXRlIG9uU2hvdzogKGJsYWRlOiBNZW51QmxhZGUpID0+IHZvaWQsIHByaXZhdGUgb25BZGQ6IChibGFkZTogTWVudUJsYWRlKSA9PiB2b2lkLCBwcml2YXRlIG9uUmVtb3ZlOiAoYmxhZGU6IE1lbnVCbGFkZSkgPT4gdm9pZCwgcHJpdmF0ZSBzdGFydDogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgdGhpcy54ID0gMDtcclxuICAgICAgICB0aGlzLnkgPSAwO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSAwO1xyXG4gICAgICAgIHRoaXMuYWRkVGltZXIgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUgPSAodGltZURpZmY6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2hvd24pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNBZGRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmdsZSA9IHRoaXMuYW5nbGUgKyBNYXRoLlBJIC8gOTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgPSB0aGlzLmFuZ2xlICUgKE1hdGguUEkgKiAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMueCA9IHRoaXMucmVtZW1iZXJlZFggKyB0aGlzLmNvbnRyb2xsZXIueEF4ZXMgKiAyNTtcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IHRoaXMucmVtZW1iZXJlZFkgKyB0aGlzLmNvbnRyb2xsZXIueUF4ZXMgKiAyNTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLnlBeGVzID4gMC4zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUaW1lciArPSB0aGlzLmNvbnRyb2xsZXIueUF4ZXMgKiB0aW1lRGlmZjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hZGRUaW1lciA+PSB0aGlzLnJlbW92ZVRpbWVyU2Vjb25kcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRpbWVyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBZGRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250cm9sbGVyLnlBeGVzIDwgMC4xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUaW1lciA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5zdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhcnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci55QXhlcyA8IC0wLjMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRpbWVyIC09IHRoaXMuY29udHJvbGxlci55QXhlcyAqIHRpbWVEaWZmO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hZGRUaW1lciA+PSB0aGlzLmFkZFRpbWVyU2Vjb25kcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWRkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWRkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRpbWVyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29udHJvbGxlci55QXhlcyA+IC0wLjEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRpbWVyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci55QXhlcyA8IC0wLjMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TaG93KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Nob3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVGltZXIgLT0gdGhpcy5jb250cm9sbGVyLnlBeGVzICogdGltZURpZmY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmxvY2F0aW9uID4gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxvY2F0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb2xvciA9IFwiYmxhY2tcIjtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0WCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBzdGFydFkgPSAwO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMubG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gd2lkdGggLyAzO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WSA9IChoZWlnaHQgLSAxMDApIC8gMyArIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwiZ3JlZW5cIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB3aWR0aCAvIDMgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WSA9IChoZWlnaHQgLSAxMDApIC8gMyArIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwiYmx1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9IHdpZHRoIC8gMztcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSAoaGVpZ2h0IC0gMTAwKSAvIDMgKiAyICsgMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gXCJvcmFuZ2VcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB3aWR0aCAvIDMgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WSA9IChoZWlnaHQgLSAxMDApIC8gMyAqIDIgKyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLnggPSBzdGFydFg7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHN0YXJ0WTtcclxuICAgICAgICAgICAgdGhpcy5yZW1lbWJlcmVkWCA9IHN0YXJ0WDtcclxuICAgICAgICAgICAgdGhpcy5yZW1lbWJlcmVkWSA9IHN0YXJ0WTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICBpZiAodGhpcy5pc0FkZGVkKSB7XHJcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUodGhpcy5hbmdsZSk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtMjUsIC0yNSwgNTAsIDUwKTtcclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzU2hvd24gJiYgIXRoaXMuaXNBZGRlZCkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoLTI1LCAzNSwgNTAgLyB0aGlzLmFkZFRpbWVyU2Vjb25kcyAqIHRoaXMuYWRkVGltZXIsIDEwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzU2hvd24gJiYgdGhpcy5pc0FkZGVkICYmIHRoaXMuYWRkVGltZXIgPiAwKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtMjUsIDM1LCA1MCAtIDUwIC8gdGhpcy5yZW1vdmVUaW1lclNlY29uZHMgKiB0aGlzLmFkZFRpbWVyLCAxMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBLZXlib2FyZENvbnRyb2xzIGltcGxlbWVudHMgQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgeEF4ZXM6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5QXhlczogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBzdGFydDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCBsZWZ0S2V5OiBudW1iZXIsIHVwS2V5OiBudW1iZXIsIHJpZ2h0S2V5OiBudW1iZXIsIGRvd25LZXk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueEF4ZXMgPSAwO1xyXG4gICAgICAgIHRoaXMueUF4ZXMgPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBsZWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gLTFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSB1cEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHJpZ2h0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnhBeGVzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBkb3duS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnlBeGVzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gbGVmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueEF4ZXMgPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueEF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IHVwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy55QXhlcyA9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55QXhlcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gcmlnaHRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnhBeGVzID0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueEF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGRvd25LZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnlBeGVzID0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueUF4ZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZXBhZENvbnRyb2xzIGltcGxlbWVudHMgQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgZ2V0IHhBeGVzKCk6IG51bWJlciB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XHJcbiAgICAgICAgdmFyIGdwID0gZ2FtZXBhZHNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGdwLmF4ZXNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB5QXhlcygpOiBudW1iZXIge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xyXG4gICAgICAgIHZhciBncCA9IGdhbWVwYWRzW3RoaXMuaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBncC5heGVzWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc3RhcnQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XHJcbiAgICAgICAgdmFyIGdwID0gZ2FtZXBhZHNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGdwLmJ1dHRvbnNbOV0ucHJlc3NlZDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCBwcml2YXRlIGluZGV4OiBudW1iZXIpIHtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi92aWV3XCI7XHJcbmltcG9ydCB7IE1lbnVCbGFkZSB9IGZyb20gXCIuL21lbnVCbGFkZVwiO1xyXG5pbXBvcnQgeyBLZXlib2FyZENvbnRyb2xzIH0gZnJvbSBcIi4va2V5Ym9hcmRDb250cm9sc1wiO1xyXG5pbXBvcnQgeyBHYW1lcGFkQ29udHJvbHMgfSBmcm9tIFwiLi9nYW1lcGFkQ29udHJvbHNcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZW51VmlldyBleHRlbmRzIFZpZXcge1xyXG4gICAgcHJpdmF0ZSBtZW51QmxhZGVzOiBNZW51QmxhZGVbXSA9IFtdO1xyXG4gICAgcHVibGljIGNvbnRyb2xsZXJzOiBDb250cm9sbGVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgZ2FtZXBhZHM6IHsgW2lkOiBzdHJpbmddOiBHYW1lcGFkIH0gPSB7fTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHN0YXJ0OiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB2YXIgaGF2ZUV2ZW50cyA9ICdvbmdhbWVwYWRjb25uZWN0ZWQnIGluIHdpbmRvdztcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbigoY3R4LCB3aWR0aCwgaGVpZ2h0KSA9PiB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9IFwiMjJweCBzYW5zLXNlcmlmXCI7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChcIllvdSBjYW4gY29udHJvbCBhIGJsYWRlIHdpdGggYSBnYW1lcGFkLCB0aGUgYXJyb3cga2V5cyBvciBXQVNELlwiLCB3aWR0aCAvIDIsIDUwKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KFwiUHJlc3MgdXAgdG8gam9pbiBhbmQgZG93biB0byBsZWF2ZS5cIiwgd2lkdGggLyAyLCA4MCk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChcIlByZXNzIGVudGVyIG9uIGtleWJvYXJkIG9yIHN0YXJ0IG9uIGEgY29udHJvbGxlciB0byBzdGFydC5cIiwgd2lkdGggLyAyLCAxMTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBibGFkZTEgPSBuZXcgTWVudUJsYWRlKG5ldyBLZXlib2FyZENvbnRyb2xzKFwiYXJyb3dzXCIsIDM3LCAzOCwgMzksIDQwKSwgdGhpcy5zaG93TWVudUJsYWRlLCB0aGlzLmFkZENvbnRyb2xsZXIsIHRoaXMucmVtb3ZlQ29udHJvbGxlckFuZE1lbnVCbGFkZSwgc3RhcnQpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0YWJsZShibGFkZTEpO1xyXG4gICAgICAgIHZhciBibGFkZTIgPSBuZXcgTWVudUJsYWRlKG5ldyBLZXlib2FyZENvbnRyb2xzKFwid2FzZFwiLCA2NSwgODcsIDY4LCA4MyksIHRoaXMuc2hvd01lbnVCbGFkZSwgdGhpcy5hZGRDb250cm9sbGVyLCB0aGlzLnJlbW92ZUNvbnRyb2xsZXJBbmRNZW51QmxhZGUsIHN0YXJ0KTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUoYmxhZGUyKTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkY29ubmVjdGVkXCIsIHRoaXMuY29ubmVjdGhhbmRsZXIpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGRpc2Nvbm5lY3RlZFwiLCB0aGlzLmRpc2Nvbm5lY3RoYW5kbGVyKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJoYXZlRXZlbnRzOiBcIiArIGhhdmVFdmVudHMpO1xyXG5cclxuICAgICAgICBpZiAoIWhhdmVFdmVudHMpIHtcclxuICAgICAgICAgICAgc2V0SW50ZXJ2YWwodGhpcy5zY2FuZ2FtZXBhZHMsIDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd01lbnVCbGFkZSA9IChtZW51QmxhZGU6IE1lbnVCbGFkZSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1lbnVCbGFkZS5jb250cm9sbGVyTmFtZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1lbnVCbGFkZXMubGVuZ3RoIDw9IDQpIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51QmxhZGVzLnB1c2gobWVudUJsYWRlKTtcclxuICAgICAgICAgICAgbWVudUJsYWRlLmxvY2F0aW9uID0gdGhpcy5tZW51QmxhZGVzLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNvcnJ5LCBvbmx5IDQgY29udHJvbGxlcnMgc3VwcG9ydGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZENvbnRyb2xsZXIgPSAobWVudUJsYWRlOiBNZW51QmxhZGUpID0+IHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnB1c2gobWVudUJsYWRlLmNvbnRyb2xsZXIpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJhZGRlZCBjb250cm9sbGVyIFwiICsgbWVudUJsYWRlLmNvbnRyb2xsZXJOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUNvbnRyb2xsZXJBbmRNZW51QmxhZGUgPSAobWVudUJsYWRlOiBNZW51QmxhZGUpID0+IHtcclxuICAgICAgICB0aGlzLm1lbnVCbGFkZXMuc3BsaWNlKHRoaXMubWVudUJsYWRlcy5pbmRleE9mKG1lbnVCbGFkZSksIDEpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMuc3BsaWNlKHRoaXMuY29udHJvbGxlcnMuaW5kZXhPZihtZW51QmxhZGUuY29udHJvbGxlciksIDEpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcInJlbW92ZWQgY29udHJvbGxlciBcIiArIG1lbnVCbGFkZS5jb250cm9sbGVyTmFtZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnVCbGFkZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbWVudUJsYWRlID0gdGhpcy5tZW51QmxhZGVzW2ldO1xyXG4gICAgICAgICAgICBtZW51QmxhZGUubG9jYXRpb24gPSBpICsgMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdGhhbmRsZXIgPSAoZTogR2FtZXBhZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJnYW1lcGFkIGNvbm5lY3RlZDogXCIgKyBlLmdhbWVwYWQuaW5kZXggKyBcIi9cIiArIGUuZ2FtZXBhZC5pZCk7XHJcbiAgICAgICAgdGhpcy5hZGRnYW1lcGFkKGUuZ2FtZXBhZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2NhbmdhbWVwYWRzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2NhbmdhbWVwYWRzXCIpO1xyXG5cclxuICAgICAgICB2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgPyBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKSA6IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FtZXBhZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGdhbWVwYWRzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNjYW5uZWQgZ2FtZXBhZDogXCIgKyBnYW1lcGFkc1tpXS5pbmRleCArIFwiL1wiICsgZ2FtZXBhZHNbaV0uaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVwYWRzW2ldLmluZGV4IGluIHRoaXMuZ2FtZXBhZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVwYWRzW2dhbWVwYWRzW2ldLmluZGV4XSA9IGdhbWVwYWRzW2ldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGdhbWVwYWQoZ2FtZXBhZHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc2Nvbm5lY3RoYW5kbGVyID0gKGU6IEdhbWVwYWRFdmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZ2FtZXBhZCBkaXNjb25uZWN0ZWQ6IFwiICsgZS5nYW1lcGFkLmluZGV4ICsgXCIvXCIgKyBlLmdhbWVwYWQuaWQpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlZ2FtZXBhZChlLmdhbWVwYWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZWdhbWVwYWQgPSAoZ2FtZXBhZDogR2FtZXBhZCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVtb3ZpbmcgZ2FtZXBhZDogXCIgKyBnYW1lcGFkLmluZGV4ICsgXCIvXCIgKyBnYW1lcGFkLmlkKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5nYW1lcGFkc1tnYW1lcGFkLmluZGV4XTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudUJsYWRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51QmxhZGUgPSB0aGlzLm1lbnVCbGFkZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChtZW51QmxhZGUuY29udHJvbGxlck5hbWUgPT0gZ2FtZXBhZC5pbmRleC50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVCbGFkZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkZ2FtZXBhZCA9IChnYW1lcGFkOiBHYW1lcGFkKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJhZGRpbmcgZ2FtZXBhZDogXCIgKyBnYW1lcGFkLmluZGV4ICsgXCIvXCIgKyBnYW1lcGFkLmlkKTtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lcGFkc1tnYW1lcGFkLmluZGV4XSA9IGdhbWVwYWQ7XHJcbiAgICAgICAgdmFyIGJsYWRlID0gbmV3IE1lbnVCbGFkZShuZXcgR2FtZXBhZENvbnRyb2xzKGdhbWVwYWQuaW5kZXgudG9TdHJpbmcoKSwgZ2FtZXBhZC5pbmRleCksIHRoaXMuc2hvd01lbnVCbGFkZSwgdGhpcy5hZGRDb250cm9sbGVyLCB0aGlzLnJlbW92ZUNvbnRyb2xsZXJBbmRNZW51QmxhZGUsIHRoaXMuc3RhcnQpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0YWJsZShibGFkZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBbmltYXRhYmxlIH0gZnJvbSBcIi4vYW5pbWF0aW9uXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmxhZGUgaW1wbGVtZW50cyBBbmltYXRhYmxlIHtcclxuICAgIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeTogbnVtYmVyO1xyXG4gICAgcHVibGljIGNvbG9yOiBzdHJpbmdcclxuICAgIHByaXZhdGUgdng6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdnk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgYW5nbGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIEE6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY3c6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29udHJvbGxlcjogQ29udHJvbGxlcikge1xyXG4gICAgICAgIHRoaXMueCA9IDA7XHJcbiAgICAgICAgdGhpcy55ID0gMDtcclxuICAgICAgICB0aGlzLmNvbG9yID0gXCJibGFja1wiO1xyXG4gICAgICAgIHRoaXMudnggPSAwO1xyXG4gICAgICAgIHRoaXMudnkgPSAwO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSAwO1xyXG4gICAgICAgIHRoaXMubSA9IDAuMTtcclxuICAgICAgICB0aGlzLmYgPSA0NjM7XHJcblxyXG4gICAgICAgIHRoaXMuQSA9IDAuMDE7XHJcbiAgICAgICAgdGhpcy5jdyA9IDAuMDU7XHJcbiAgICAgICAgdGhpcy5wID0gMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHtcclxuICAgICAgICB0aGlzLmFuZ2xlID0gdGhpcy5hbmdsZSArIE1hdGguUEkgLyA5O1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSB0aGlzLmFuZ2xlICUgKE1hdGguUEkgKiAyKTtcclxuXHJcbiAgICAgICAgdmFyIGZGcmljdGlvblggPSAwLjUgKiB0aGlzLkEgKiB0aGlzLmN3ICogdGhpcy5wICogdGhpcy52eCAqIE1hdGguYWJzKHRoaXMudngpO1xyXG4gICAgICAgIHZhciBmRnJpY3Rpb25ZID0gMC41ICogdGhpcy5BICogdGhpcy5jdyAqIHRoaXMucCAqIHRoaXMudnkgKiBNYXRoLmFicyh0aGlzLnZ5KTtcclxuXHJcbiAgICAgICAgLy8gZkZyaWN0aW9uWCA9IDA7XHJcbiAgICAgICAgLy8gZkZyaWN0aW9uWSA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGF4ID0gdGhpcy5mICogdGhpcy5jb250cm9sbGVyLnhBeGVzIC0gZkZyaWN0aW9uWCAvIHRoaXMubTtcclxuICAgICAgICB2YXIgYXkgPSB0aGlzLmYgKiB0aGlzLmNvbnRyb2xsZXIueUF4ZXMgLSBmRnJpY3Rpb25ZIC8gdGhpcy5tO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudnggKz0gYXggKiB0aW1lRGlmZjtcclxuICAgICAgICB0aGlzLnZ5ICs9IGF5ICogdGltZURpZmY7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy54ICs9IHRoaXMudnggKiB0aW1lRGlmZjtcclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy52eSAqIHRpbWVEaWZmO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcblxyXG4gICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIGN0eC5yb3RhdGUodGhpcy5hbmdsZSk7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KC0yNSwgLTI1LCA1MCwgNTApO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIi4vdmlld1wiO1xyXG5pbXBvcnQgeyBCbGFkZSB9IGZyb20gXCIuL2JsYWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVZpZXcgZXh0ZW5kcyBWaWV3IHtcclxuICAgIHB1YmxpYyBzdGFydChjb250cm9sbGVyczogQ29udHJvbGxlcltdKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250cm9sbGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gY29udHJvbGxlcnNbaV07XHJcbiAgICAgICAgICAgIHZhciBibGFkZSA9IG5ldyBCbGFkZShjb250cm9sbGVyKTtcclxuICAgICAgICAgICAgbGV0IGNvbG9yID0gXCJibGFja1wiO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnRYID0gMDtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0WSA9IDA7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaSArIDEpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gdGhpcy53aWR0aCAvIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRZID0gdGhpcy5oZWlnaHQgLyAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gXCJncmVlblwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9IHRoaXMud2lkdGggLyAzICogMjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSB0aGlzLmhlaWdodCAvIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBcImJsdWVcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB0aGlzLndpZHRoIC8gMztcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSB0aGlzLmhlaWdodCAvIDMgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gXCJvcmFuZ2VcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydFggPSB0aGlzLndpZHRoIC8gMyAqIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRZID0gdGhpcy5oZWlnaHQgLyAzICogMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBibGFkZS5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgICAgICBibGFkZS54ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICBibGFkZS55ID0gc3RhcnRZO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGFibGUoYmxhZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCIuL2FuaW1hdGlvblwiO1xyXG5pbXBvcnQgeyBNZW51VmlldyB9IGZyb20gXCIuL21lbnVWaWV3XCI7XHJcbmltcG9ydCB7IEdhbWVWaWV3IH0gZnJvbSBcIi4vZ2FtZVZpZXdcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIGFuaW1hdGlvbjogQW5pbWF0aW9uO1xyXG4gICAgbWVudTogTWVudVZpZXc7XHJcbiAgICBnYW1lOiBHYW1lVmlldztcclxuXHJcbiAgICBwdWJsaWMgcnVuKCkge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gQW5pbWF0aW9uLmNyZWF0ZUluQm9keSgpO1xyXG4gICAgICAgIHRoaXMubWVudSA9IG5ldyBNZW51Vmlldyh0aGlzLnN0YXJ0KTtcclxuICAgICAgICB0aGlzLmdhbWUgPSBuZXcgR2FtZVZpZXcoKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5hZGRWaWV3KHRoaXMubWVudSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uYWRkVmlldyh0aGlzLmdhbWUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLm1lbnUuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zaG93KCk7XHJcbiAgICAgICAgdGhpcy5nYW1lLnN0YXJ0KHRoaXMubWVudS5jb250cm9sbGVycyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBtYWluLCBmYWxzZSk7XHJcblxyXG5mdW5jdGlvbiBtYWluKCkge1xyXG4gIGNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuICBhcHAucnVuKCk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9